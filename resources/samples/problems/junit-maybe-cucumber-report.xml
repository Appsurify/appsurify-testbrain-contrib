<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<testsuite errors="0" failures="16" name="io.cucumber.core.plugin.JUnitFormatter" skipped="0" tests="163" time="1,571.609">
    <testcase classname="Automatic cancellation of a delinquent account" name="Send correct block codes in end of day account balance file for systematically revoked account" time="107.452">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Johnny" with end of cycle in 28 days of the country.passed
When the billing period ends................................................passed
Then a total of 1 CAD 599.00 membership fee has been charged................passed
When a payment of CAD 5.00 is made on 2022-02-10............................passed
Then the total account balance is CAD 594.00................................passed
When the billing period ends................................................passed
Then the account age is 30 days.............................................passed
When a payment of CAD 5.00 is made on 2022-03-10............................passed
Then the total account balance is CAD 603.19................................passed
When the billing period ends................................................passed
Then the account age is 60 days.............................................passed
When a payment of CAD 5.00 is made on 2022-04-10............................passed
Then the total account balance is CAD 613.32................................passed
When the billing period ends................................................passed
Then the account age is 90 days.............................................passed
When a payment of CAD 5.00 is made on 2022-05-10............................passed
Then the total account balance is CAD 622.96................................passed
When the billing period ends................................................passed
Then the account age is 120 days............................................passed
When a payment of CAD 5.00 is made on 2022-06-10............................passed
Then the total account balance is CAD 633.09................................passed
When the billing period ends................................................passed
Then the account age is 150 days............................................passed
And the account status should be "COLLECTIONS" with reason "REVOKED"........passed
When roll the account business date of "Johnny" to end of cycle date........passed
And the current business date is 2022-07-02.................................passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-07-01.passed
And "ACCOUNT_BALANCE" file contains records for "Johnny" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Country Calendar: Business date roll over" name="Unlock gateway after processing files and rollover the country" time="425.535">
        <failure message="Condition with alias '[2024-06-17T23:17:50.292856] Assert Journal Entry, with type [null] and reason [REGISTERED_CARD_REVERSAL], for Account [cdbfe90f-1c26-4b05-a54a-8aac534dfafc]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: REGISTERED_CARD_REVERSAL&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=6a4f07ab-8a36-48f5-baa5-77017f4348c1, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=d47e7fe4-8014-44d9-a98f-c5d124a1bb87, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=86e80d30-fa8f-420b-9343-060610c0e990, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=ae3be249-a68f-4634-b13f-602545df05cf, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=1af249c1-fcae-4b60-95d9-b0c912970a1b, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=6a4f07ab-8a36-48f5-baa5-77017f4348c1, accountType=null)&#10;&#10;JournalEntry(journalEntryId=271fdaad-00ef-4cc0-aebc-21013ea47e1e, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=86e80d30-fa8f-420b-9343-060610c0e990, accountType=null)&#10;&#10;JournalEntry(journalEntryId=3c38d0eb-762c-4378-9fce-2c092dcdaaba, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=807ded7b-5f37-405c-a628-6c147c63ec65, sourceReferenceId=null, sourceSystem=NEMO, postingDate=2024-06-17, effectiveDate=2024-06-17, type=PURCHASE, description=COMPASS AUTOLOAD BURNABY, reason=MERCHANT_CHARGE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=10.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=705f3471-c8bb-4b25-a024-cc62ae2ff046, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=5c3c8a7f-f8ab-46cc-9688-18680235bec4, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=75f867d5-db81-480d-a016-08a716cdf8f9, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=278bbfdc-dcae-44ea-b385-8e84fb605f2f, sourceReferenceId=null, sourceSystem=NEMO, postingDate=2024-06-17, effectiveDate=2024-06-17, type=PURCHASE, description=COMPASS AUTOLOAD BURNABY, reason=MERCHANT_CHARGE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=10.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=dbb0c2e9-44b6-4296-83b0-76c85caa5252, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=705f3471-c8bb-4b25-a024-cc62ae2ff046, accountType=null)&#10;&#10;JournalEntry(journalEntryId=bffcb2c0-a27b-4eb8-91e5-a2726407e3fc, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=ea2cf94c-8f37-4b02-b041-73598238a1a3, sourceReferenceId=null, sourceSystem=GNA, postingDate=2024-06-17, effectiveDate=2024-06-17, type=BALANCE_TRANSFER, description=Balance Transfer, reason=BALANCE_TRANSFER, termId=bcc7cfe7-242b-46db-9616-5b0d3d4d3513, billingAmount=5000.8800000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=6410ce55-9a3b-4b92-b99c-d499ffa5881d, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Balance transfer for cheques, reason=BALANCE_TRANSFER_FEE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=150.03, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=bffcb2c0-a27b-4eb8-91e5-a2726407e3fc, accountType=null)&#10;&#10;JournalEntry(journalEntryId=ae010812-d67e-4548-8744-a88e8eea8b2f, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=3f5ffd68-845e-43ed-acdc-bb3cfba62fdb, sourceReferenceId=null, sourceSystem=STAR, postingDate=2024-05-27, effectiveDate=2024-05-27, type=ADJUSTMENT, description=Cash Back Credit Issued, reason=CASHBACK_STATEMENT_CREDIT, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=12.4900000000, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar for GRL is set up on a day that hasn't yet received any transaction files.passed
And the country calendar is registered with the following gateways..........passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
When 1 GNA file pair, 1 GCNS file pair, 1 STAR file pair, 3 FINCAP file pair and 2 CARS file pair are received for the current business date.passed
And a BALANCE_TRANSFER of 5000.88 is recorded...............................passed
And a BALANCE_TRANSFER_FEE of 150.03 is recorded............................passed
And a REGISTERED_CARD_REVERSAL of 5.00 is recorded..........................failed
And a CASHBACK_STATEMENT_CREDIT of 12.49 is recorded........................skipped
And 3 of CASH_ADVANCE_ATM of 100.00 is recorded for "Alice".................skipped
And 3 of CASH_ADVANCE_FEE of 2.75 is recorded for "Alice"...................skipped
And 2 of MERCHANT_CHARGE of 10.00 is recorded for "Alice"...................skipped
And roll the account business date of "Alice" to current country business date.skipped
Then business date for the country is eventually successfully rolled over...skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:17:50.292856] Assert Journal Entry, with type [null] and reason [REGISTERED_CARD_REVERSAL], for Account [cdbfe90f-1c26-4b05-a54a-8aac534dfafc]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: REGISTERED_CARD_REVERSAL
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=6a4f07ab-8a36-48f5-baa5-77017f4348c1, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=d47e7fe4-8014-44d9-a98f-c5d124a1bb87, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=86e80d30-fa8f-420b-9343-060610c0e990, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=ae3be249-a68f-4634-b13f-602545df05cf, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=1af249c1-fcae-4b60-95d9-b0c912970a1b, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=6a4f07ab-8a36-48f5-baa5-77017f4348c1, accountType=null)

JournalEntry(journalEntryId=271fdaad-00ef-4cc0-aebc-21013ea47e1e, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=86e80d30-fa8f-420b-9343-060610c0e990, accountType=null)

JournalEntry(journalEntryId=3c38d0eb-762c-4378-9fce-2c092dcdaaba, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=807ded7b-5f37-405c-a628-6c147c63ec65, sourceReferenceId=null, sourceSystem=NEMO, postingDate=2024-06-17, effectiveDate=2024-06-17, type=PURCHASE, description=COMPASS AUTOLOAD BURNABY, reason=MERCHANT_CHARGE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=10.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=705f3471-c8bb-4b25-a024-cc62ae2ff046, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=5c3c8a7f-f8ab-46cc-9688-18680235bec4, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2024-06-17, effectiveDate=2024-06-17, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=75f867d5-db81-480d-a016-08a716cdf8f9, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=278bbfdc-dcae-44ea-b385-8e84fb605f2f, sourceReferenceId=null, sourceSystem=NEMO, postingDate=2024-06-17, effectiveDate=2024-06-17, type=PURCHASE, description=COMPASS AUTOLOAD BURNABY, reason=MERCHANT_CHARGE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=10.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=dbb0c2e9-44b6-4296-83b0-76c85caa5252, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=8282223f-47a4-40f6-8ffb-6b5ee44418a8, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=705f3471-c8bb-4b25-a024-cc62ae2ff046, accountType=null)

JournalEntry(journalEntryId=bffcb2c0-a27b-4eb8-91e5-a2726407e3fc, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=ea2cf94c-8f37-4b02-b041-73598238a1a3, sourceReferenceId=null, sourceSystem=GNA, postingDate=2024-06-17, effectiveDate=2024-06-17, type=BALANCE_TRANSFER, description=Balance Transfer, reason=BALANCE_TRANSFER, termId=bcc7cfe7-242b-46db-9616-5b0d3d4d3513, billingAmount=5000.8800000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=6410ce55-9a3b-4b92-b99c-d499ffa5881d, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2024-06-17, effectiveDate=2024-06-17, type=FEE, description=Balance transfer for cheques, reason=BALANCE_TRANSFER_FEE, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=150.03, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=bffcb2c0-a27b-4eb8-91e5-a2726407e3fc, accountType=null)

JournalEntry(journalEntryId=ae010812-d67e-4548-8744-a88e8eea8b2f, paymentDeviceId=eb687d28-8e2a-4304-b05b-102789c128bf, relationshipId=79378caf-b24c-4d72-811f-a40a4fe86f76, transactionId=3f5ffd68-845e-43ed-acdc-bb3cfba62fdb, sourceReferenceId=null, sourceSystem=STAR, postingDate=2024-05-27, effectiveDate=2024-05-27, type=ADJUSTMENT, description=Cash Back Credit Issued, reason=CASHBACK_STATEMENT_CREDIT, termId=64314915-8e8b-46e5-bae4-61f079775055, billingAmount=12.4900000000, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryOnReason(JournalSteps.java:767)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:94)
	at ✽.a REGISTERED_CARD_REVERSAL of 5.00 is recorded(classpath:features/CountryCalendar.feature:65)
]]>
        </failure>
    </testcase>
    <testcase classname="Country Calendar: Business date roll over" name="Manually rollover country business day when gateway lock is present" time="33.333">
        <system-out>
            <![CDATA[Given a random country calendar is set up with end of day time at 00:00.....passed
And the country calendar is registered with the following gateways..........passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And 1 GNA file pair, 1 GCNS file pair, 1 STAR file pair, 0 FINCAP file pair and 0 CARS file pair are received for the current business date.passed
When manually rollover country to next business day.........................passed
Then country should be rolled over to next business day.....................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Principal credit adjustments" name="Cash principal credit adjustment with plan type C and credit plan number 10001" time="40.657">
        <system-out>
            <![CDATA[Given today is 2019-03-10...................................................passed
Given a new AIR_CANADA_CORE credit application is submitted with cycle day 1.passed
When a principal credit adjustment transaction is received for CAD 3.00 with plan type C.passed
Then a journal entry of CAD 3.00 with type ADJUSTMENT, reason PRINCIPAL_CREDIT_ADJUSTMENT and CASH term type is RECORDED.passed
When a principal credit adjustment transaction is received for CAD 5.00 with credit plan number 10001.passed
Then a journal entry of CAD 5.00 with type ADJUSTMENT, reason PRINCIPAL_CREDIT_ADJUSTMENT and CASH term type is RECORDED.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Principal credit adjustments" name="Purchase principal credit adjustment with plan type R" time="37.655">
        <system-out>
            <![CDATA[Given today is 2019-03-10...................................................passed
Given a new AIR_CANADA_CORE credit application is submitted with cycle day 1.passed
When a principal credit adjustment transaction is received for CAD 3.00 with plan type R.passed
Then a journal entry of CAD 3.00 with type ADJUSTMENT, reason PRINCIPAL_CREDIT_ADJUSTMENT and PURCHASE term type is RECORDED.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="Validating FAH and SBAL Credit Redistribution Merchant return" time="126.272">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a "PURCHASE" transaction is received from globestar for CAD 1200.00 with current business date in 0 days.passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 500.00 with the current business in 4 days.passed
And a CASH_ADVANCE_FEE of CAD 15.00 is charged..............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And a MEMBERSHIP_FEE of CAD 120.00 is charged...............................passed
And the total account balance is CAD 1835...................................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total interest charged for the billing period will be CAD 87.43 on 2021-08-01.passed
And a transaction with code "0006" and Plan Type "R" is received from Globestar for CAD 1600.00 with the current business date.passed
And a MERCHANT_RETURN of 1600 is recorded...................................passed
And the billing period ends.................................................passed
When the current business date is 2021-09-02................................passed
And Generate "FAH" End Of Day Files for current country code on date 2021-09-01.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-09-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="AC1 Single Purchase non-payment credit transaction generating Permanent Credit Redistribution at BP assessment" time="119.676">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-06 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 30 days of the country.passed
When the current business date for given country is 2023-01-07..............passed
And a "PURCHASE" transaction is received from globestar for CAD 200.00 with current business date in 0 days.passed
When the current business date for given country is 2023-01-08..............passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business in 0 days.passed
And a CASH_ADVANCE_FEE of CAD 3.00 is charged...............................passed
And the billing period ends.................................................passed
And a MEMBERSHIP_FEE of CAD 120.00 is charged...............................passed
And the total account balance is CAD 423....................................passed
And the billing period ends.................................................passed
And the total interest charged for the billing period will be CAD 17.21 on 2023-03-05.passed
When the current business date for given country is 2023-03-08..............passed
And a transaction with code "0006" and Plan Type "R" is received from Globestar for CAD 300.00 with the current business date.passed
And a MERCHANT_RETURN of 300 is recorded....................................passed
When the current business date for given country is 2023-03-09..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-08.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And the billing period ends.................................................passed
And the current business date for given country is 2023-04-06...............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-04-05.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="AC3 Cash credit adjustment transaction generating Permanent Credit Redistribution to Principal balances at BP assessment" time="114.254">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-06 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 30 days of the country.passed
When the current business date for given country is 2023-01-08..............passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business in 0 days.passed
And a CASH_ADVANCE_FEE of CAD 3.00 is charged...............................passed
And the billing period ends.................................................passed
And a MEMBERSHIP_FEE of CAD 599.00 is charged...............................passed
And the total account balance is CAD 702....................................passed
And the billing period ends.................................................passed
And the total interest charged for the billing period will be CAD 19.09 on 2023-03-05.passed
When the current business date for given country is 2023-03-08..............passed
And a transaction with code "0131" and Plan Type "R" is received from Globestar for CAD 579.00 with the current business date.passed
And a FRAUDULENT_CHARGE_CREDIT of 579 is recorded...........................passed
When the current business date for given country is 2023-03-09..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-08.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And the billing period ends.................................................passed
When the current business date for given country is 2023-04-06..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-04-05.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="AC1 Multiple purchase credit adjustment transaction generating Permanent Credit Redistribution to Principal balance at BP assessment" time="94.555">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-06 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 30 days of the country.passed
When the current business date for given country is 2023-01-07..............passed
And a "PURCHASE" transaction is received from globestar for CAD 200.00 with current business date in 0 days.passed
When the current business date for given country is 2023-01-08..............passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business in 0 days.passed
And a CASH_ADVANCE_FEE of CAD 3.00 is charged...............................passed
And the billing period ends.................................................passed
And a MEMBERSHIP_FEE of CAD 120.00 is charged...............................passed
And the total account balance is CAD 423....................................passed
And the billing period ends.................................................passed
And the total interest charged for the billing period will be CAD 17.21 on 2023-03-05.passed
When the current business date for given country is 2023-03-08..............passed
And a transaction with code "0006" and Plan Type "R" is received from Globestar for CAD 300.00 with the current business date.passed
And a MERCHANT_RETURN of 300 is recorded....................................passed
When the current business date for given country is 2023-03-09..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-08.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
When the current business date for given country is 2023-03-09..............passed
And a transaction with code "0006" and Plan Type "R" is received from Globestar for CAD 100.00 with the current business date.passed
And a MERCHANT_RETURN of 100 is recorded....................................passed
When the current business date for given country is 2023-03-10..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-09.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And the billing period ends.................................................passed
When the current business date for given country is 2023-04-06..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-04-05.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="AC2 Cash credit adjustment transaction generating Permanent Credit Redistribution to Principal balances at BP assessment" time="91.475">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-06 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 30 days of the country.passed
When the current business date for given country is 2023-01-06..............passed
And a "PURCHASE" transaction is received from globestar for CAD 200.00 with current business date in 0 days.passed
When the current business date for given country is 2023-01-08..............passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business in 0 days.passed
And a CASH_ADVANCE_FEE of CAD 3.00 is charged...............................passed
And the billing period ends.................................................passed
And a MEMBERSHIP_FEE of CAD 599.00 is charged...............................passed
And the total account balance is CAD 902....................................passed
When the current business date for given country is 2023-02-08..............passed
And a transaction with code "0131" and Plan Type "C" is received from Globestar for CAD 800.00 with the current business date.passed
And a FRAUDULENT_CHARGE_CREDIT of 800 is recorded...........................passed
When the current business date for given country is 2023-02-09..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-02-08.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And the billing period ends.................................................passed
When the current business date for given country is 2023-03-06..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-05.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Allocation strategies used to allocate payments are visible in the balance breakdown" name="Report Tax credit redistribution to FAH at BP assessment" time="69.677">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-06 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 30 days of the country.passed
And the current business date for given country is 2023-01-07...............passed
And a "PURCHASE" transaction is received from globestar for CAD 400.00 with current business date in 0 days.passed
And the current business date for given country is 2023-01-08...............passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business in 0 days.passed
And a CASH_ADVANCE_FEE of CAD 3.00 is charged...............................passed
And the current business date for given country is 2023-01-10...............passed
And a transaction with code "0705" and Plan Type "R" is received from Globestar for CAD 25.00 with the current business in 0 days.passed
And CAD 25.00 DEBIT of DISHONOURED_PAYMENT_FEE is posted on 2023-01-10 with an effective date of 2023-01-10.passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And a MEMBERSHIP_FEE of CAD 120.00 is charged...............................passed
When the current business date for given country is 2023-02-09..............passed
And a transaction with code "0310" and Plan Type "R" is received from Globestar for CAD 60.00 with the current business date.passed
And a GST_REVERSED_MANUAL of CAD 60.00 is charged...........................passed
When the current business date for given country is 2023-02-10..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-02-09.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
And the billing period ends.................................................passed
When the current business date for given country is 2023-03-06..............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-03-05.passed
And "FAH" file contains records for "Sam" with the following records:.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Fraudulent Charge Debit" name="Fraud Charge Credit and Fraud Charge Debit are reflected in EOD files" time="312.153">
        <failure message="Condition with alias '[2024-06-17T23:16:34.819727] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [9e78f677-d377-4d25-8692-6dac044b2145]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=786aaed1-c7bf-4299-91df-51e66b71c7f7, paymentDeviceId=95e697cd-ba51-4a97-835a-bc29bbd86517, relationshipId=4f83717b-9bf9-47d2-89d4-d0915f68a7c0, transactionId=b414d234-f619-4e6c-959a-c87e53788072, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=5ae40a29-4e5a-4cab-a4a0-a93fb361b887, paymentDeviceId=95e697cd-ba51-4a97-835a-bc29bbd86517, relationshipId=4f83717b-9bf9-47d2-89d4-d0915f68a7c0, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=786aaed1-c7bf-4299-91df-51e66b71c7f7, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
When a file: Cash that has transactions for "Bob" is submitted from FINCAP on current business date.passed
Then a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob".....................passed
When a file: PurchaseMerchantCharge that has transactions for "Bob" is submitted from GCNS on current business date.passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................failed
When a FRAUDULENT_CHARGE_CREDIT of CAD 5.00 with plan type R is received....skipped
And a FRAUDULENT_CHARGE_CREDIT of CAD 100.00 with plan type C is received...skipped
And a FRAUD_ADDITIONAL_CREDIT of CAD 3.00 with plan type C is received......skipped
And a FRADULENT_CHARGE_DEBIT of CAD 5.00 with plan type R is received.......skipped
And a FRADULENT_CHARGE_DEBIT of CAD 100.00 with plan type C is received.....skipped
And a FRAUD_ADDITIONAL_DEBIT of CAD 3.00 with plan type C is received.......skipped
Then the total account balance on the current business day is CAD 108.......skipped
When roll the account business date of "Bob" to current country business date.skipped
And the business date rolls over for the country............................skipped
And the country code is registered for EoD file creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.skipped
And "SUB_BALANCE" file contains records for "Bob" with the following records:.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped
And "FAH" file contains records for "Bob" with the following records:.......skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:16:34.819727] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [9e78f677-d377-4d25-8692-6dac044b2145]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=786aaed1-c7bf-4299-91df-51e66b71c7f7, paymentDeviceId=95e697cd-ba51-4a97-835a-bc29bbd86517, relationshipId=4f83717b-9bf9-47d2-89d4-d0915f68a7c0, transactionId=b414d234-f619-4e6c-959a-c87e53788072, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=5ae40a29-4e5a-4cab-a4a0-a93fb361b887, paymentDeviceId=95e697cd-ba51-4a97-835a-bc29bbd86517, relationshipId=4f83717b-9bf9-47d2-89d4-d0915f68a7c0, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=786aaed1-c7bf-4299-91df-51e66b71c7f7, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryOnReason(JournalSteps.java:767)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:94)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded(classpath:features/FraudulentChargeDebit.feature:971)
]]>
        </failure>
    </testcase>
    <testcase classname="Future dated transactions" name="Future-dated transaction is included in EOD Transaction file with Posting flag &quot;98&quot;" time="612.973">
        <failure message="Condition with alias '[2024-06-17T23:16:36.680393] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [769ebe2a-7fe0-4c83-929d-2b2589acb9a4]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=a9415b78-eacc-4f9a-92dd-f1f8a28ef5a6, paymentDeviceId=766d8656-9251-470d-83ca-2bedc03a5b17, relationshipId=a344fafc-744a-4f55-956f-72a915fb0893, transactionId=da856564-5632-4377-8522-35583bfb5e83, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=f0492dd6-a0f0-4762-b055-58e35cdb153d, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=fdeba194-d016-4506-80b6-5400fecf83c6, paymentDeviceId=766d8656-9251-470d-83ca-2bedc03a5b17, relationshipId=a344fafc-744a-4f55-956f-72a915fb0893, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=f0492dd6-a0f0-4762-b055-58e35cdb153d, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=a9415b78-eacc-4f9a-92dd-f1f8a28ef5a6, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle in 10 days of the country.passed
And a file: Cash that has transactions for "Bob" is submitted from FINCAP on current business date.passed
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"......................passed
And a file: PurchaseMerchantCharge_FutureDate that has transactions for "Bob" is submitted from GCNS with effective date 5 days from current business date.passed
And a MERCHANT_CHARGE of 5.00 is recorded for "Bob".........................failed
And roll the account business date of "Bob" to current country business date.skipped
When the business date rolls over for the country...........................skipped
And the country code is registered for EoD file creation for given business date.skipped
And "Bob" account is registered for "EOD" File creation for given business date.skipped
And "ACCOUNT_BALANCE" file contains record for "Bob" with current balance of CAD 102.75 and total number of records 1.skipped
And "SUB_BALANCE" file contains record for "Bob" with current balance of CAD 102.75 and total number of records 3.skipped
And "FAH" file contains records for "Bob" with total transaction amount of CAD 102.75 and total number of records 2.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:16:36.680393] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [769ebe2a-7fe0-4c83-929d-2b2589acb9a4]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=a9415b78-eacc-4f9a-92dd-f1f8a28ef5a6, paymentDeviceId=766d8656-9251-470d-83ca-2bedc03a5b17, relationshipId=a344fafc-744a-4f55-956f-72a915fb0893, transactionId=da856564-5632-4377-8522-35583bfb5e83, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=f0492dd6-a0f0-4762-b055-58e35cdb153d, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=fdeba194-d016-4506-80b6-5400fecf83c6, paymentDeviceId=766d8656-9251-470d-83ca-2bedc03a5b17, relationshipId=a344fafc-744a-4f55-956f-72a915fb0893, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=f0492dd6-a0f0-4762-b055-58e35cdb153d, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=a9415b78-eacc-4f9a-92dd-f1f8a28ef5a6, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded for "Bob"(classpath:features/FutureDatedTransactions.feature:121)
]]>
        </failure>
    </testcase>
    <testcase classname="Future dated transactions" name="Account with Future Dated credit transaction should be posted on the day it was received and not on its effective date" time="51.402">
        <system-out>
            <![CDATA[Given today is 2021-04-02...................................................passed
And a random country calendar is set up with end of day time at 00:50.......passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 19 days of the country.passed
And the billing period ends.................................................passed
And the membership fee is CAD 599.00........................................passed
When today is 2021-05-19....................................................passed
And a FINCAP file is received on the current business day containing:.......passed
And 1 of REGULAR_PAYMENT of 599.00 is recorded for "Bob"....................passed
Then the total account balance is CAD 0.00..................................passed
And the current business date for given country is 2021-05-20...............passed
And Generate "TRANSACTION,FAH" End Of Day Files for current country code on date 2021-05-19.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
And "FAH" file contains records for "Bob" with the following records:.......passed
When the billing period ends................................................passed
And today is 2021-05-22.....................................................passed
Then the total account balance is CAD 0.00..................................passed
And the account age is current..............................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Paid in full impact on End of Day" name="Paid after suspense" time="59.559">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-08-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
And the billing period ends.................................................passed
And a card purchase of CAD 1000.00 is made on 2023-08-01....................passed
When the current business date for given country is 2023-08-04..............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-03.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When a suspense transaction for term PURCHASE of CAD 1000.00 is made on 2023-08-06 with an effective date 2023-08-01.passed
And the current business date for given country is 2023-08-07...............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-06.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Paid in full impact on End of Day" name="Paid before grace expiry (Payment is within invariance of 9.99)" time="55.03">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-08-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
And a card purchase of CAD 1000.00 is made on 2023-08-01....................passed
And the billing period ends.................................................passed
When a payment of CAD 1080 is made on 2023-08-02............................passed
When the current business date for given country is 2023-08-04..............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-03.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When a payment of CAD 9.01 is made on 2023-08-06............................passed
And the current business date for given country is 2023-08-07...............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-06.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Paid in full impact on End of Day" name="Suspense after grace expiry" time="60.089">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-08-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
And a card purchase of CAD 3000.00 is made on 2023-08-01....................passed
And the billing period ends.................................................passed
When the current business date for given country is 2023-08-04..............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-03.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When a payment of CAD 150.00 is made on 2023-08-06..........................passed
And a payment of CAD 450.00 is made on 2023-08-07...........................passed
And the current business date for given country is 2023-08-08...............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-07.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When a suspense transaction for term PURCHASE of CAD 2000.00 is made on 2023-08-28 with an effective date 2023-08-01.passed
And the current business date for given country is 2023-08-29...............passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-08-28.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Temporary Credit" name="Temporary credit is reflected in EOD files" time="306.096">
        <failure message="Condition with alias '[2024-06-17T23:17:45.659207] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [2bc853f1-0020-4fcc-96b3-5ec0c9a55d37]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And a file: PurchaseMerchantCharge that has transactions for "Bob" is submitted from GCNS on current business date.passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................failed
When a temporary credit transaction is received for CAD 3.00................skipped
Then a journal entry of CAD 3.00 with type PAYMENT and reason TEMPORARY_CREDIT is RECORDED.skipped
And roll the account business date of "Bob" to current country business date.skipped
When the business date rolls over for the country...........................skipped
And the country code is registered for EoD file creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.skipped
And "SUB_BALANCE" file contains record for "Bob" with current balance of CAD 601.00 and total number of records 2.skipped
And "FAH" file contains records for "Bob" with the following records:.......skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:17:45.659207] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [2bc853f1-0020-4fcc-96b3-5ec0c9a55d37]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryOnReason(JournalSteps.java:767)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:94)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded(classpath:features/TemporaryCredit.feature:321)
]]>
        </failure>
    </testcase>
    <testcase classname="Temporary Debit" name="Purchase and Cash temporary debits are reflected in EOD files" time="310.49">
        <failure message="Condition with alias '[2024-06-17T23:17:55.355729] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [6d6f13be-38d6-4f5d-81af-9377d84c25c8]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=a4d7d5ee-4ef0-4859-8dd6-c69682ee82bb, paymentDeviceId=0acef7ad-3883-4355-bcb2-b5d39e17b8e0, relationshipId=c269a1b1-8f1a-4600-b34b-f09947f868c2, transactionId=24483b3c-c91d-4fc7-b665-296f744232ea, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=8ac92073-037e-429f-89ae-7facc794b105, paymentDeviceId=0acef7ad-3883-4355-bcb2-b5d39e17b8e0, relationshipId=c269a1b1-8f1a-4600-b34b-f09947f868c2, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=a4d7d5ee-4ef0-4859-8dd6-c69682ee82bb, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And a file: Cash that has transactions for "Bob" is submitted from FINCAP on current business date.passed
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"......................passed
And a file: PurchaseMerchantCharge that has transactions for "Bob" is submitted from GCNS on current business date.passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................failed
When a temporary debit transaction is received for CAD 50.00 with plan type R.skipped
Then a journal entry of CAD 50.00 with type ADJUSTMENT and reason TEMPORARY_DEBIT is RECORDED.skipped
When a temporary debit transaction is received for CAD 25.00 with plan type C.skipped
Then a journal entry of CAD 25.00 with type ADJUSTMENT and reason TEMPORARY_DEBIT is RECORDED.skipped
And roll the account business date of "Bob" to current country business date.skipped
When the business date rolls over for the country...........................skipped
And the country code is registered for EoD file creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.skipped
And "SUB_BALANCE" file contains records for "Bob" with the following records:.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped
And "FAH" file contains records for "Bob" with the following records:.......skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:17:55.355729] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [6d6f13be-38d6-4f5d-81af-9377d84c25c8]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=a4d7d5ee-4ef0-4859-8dd6-c69682ee82bb, paymentDeviceId=0acef7ad-3883-4355-bcb2-b5d39e17b8e0, relationshipId=c269a1b1-8f1a-4600-b34b-f09947f868c2, transactionId=24483b3c-c91d-4fc7-b665-296f744232ea, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=8ac92073-037e-429f-89ae-7facc794b105, paymentDeviceId=0acef7ad-3883-4355-bcb2-b5d39e17b8e0, relationshipId=c269a1b1-8f1a-4600-b34b-f09947f868c2, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=a4d7d5ee-4ef0-4859-8dd6-c69682ee82bb, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryOnReason(JournalSteps.java:767)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:94)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded(classpath:features/TemporaryDebit.feature:378)
]]>
        </failure>
    </testcase>
    <testcase classname="Suspense impact on charge off" name="systematically charge-off account when all outstanding dispute gets resolved" time="39.788">
        <system-out>
            <![CDATA[Given today is 2023-02-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 25.passed
And the account status is ACTIVE with reason ACTIVE.........................passed
And a card purchase of CAD 500 with an effective date 2023-02-10 is received on 2023-02-10.passed
And a card purchase of CAD 100 with an effective date 2023-02-11 is received on 2023-02-11.passed
When 6 billing periods has been closed......................................passed
Then the account age is 150 days............................................passed
And the account status is COLLECTIONS with reason REVOKED...................passed
And the billing period ends.................................................passed
When a suspense transaction of CAD 100 with plan type R is received on 2023-09-05 and effective on 2023-02-11.passed
Then a journal entry of CAD 100 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When the billing period ends................................................passed
Then the account age is 210 days............................................passed
And the account status is COLLECTIONS with reason REVOKED...................passed
And the account does have pending charged off with reason internal..........passed
Given today is 2023-10-12...................................................passed
When a suspense reversal transaction of CAD 100 with plan type R is received on 2023-10-12 and effective on 2023-02-11.passed
Then a journal entry of CAD 100 with type SUSPENSE, reason DISPUTED_CHARGE_REVERSAL and PURCHASE term type is RECORDED.passed
And the account status is CHARGE_OFF with reason INTERNAL effective on 2023-10-12.passed
And the account does not have pending charged off...........................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Suspense impact on charge off" name="Do not systematically charge-off account after dispute is resolved partially" time="40.54">
        <system-out>
            <![CDATA[Given today is 2023-02-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 25.passed
And the account status is ACTIVE with reason ACTIVE.........................passed
And a card purchase of CAD 500 with an effective date 2023-02-10 is received on 2023-02-10.passed
And a card purchase of CAD 300 with an effective date 2023-02-12 is received on 2023-02-12.passed
And a card purchase of CAD 100 with an effective date 2023-02-13 is received on 2023-02-13.passed
When 6 billing periods has been closed......................................passed
Then the account age is 150 days............................................passed
And the account status is COLLECTIONS with reason REVOKED...................passed
And the billing period ends.................................................passed
When a suspense transaction of CAD 300 with plan type R is received on 2023-09-05 and effective on 2023-02-12.passed
Then a journal entry of CAD 300 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When a suspense transaction of CAD 100 with plan type R is received on 2023-09-08 and effective on 2023-02-13.passed
Then a journal entry of CAD 100 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When the billing period ends................................................passed
Then the account age is 210 days............................................passed
And the account status is COLLECTIONS with reason REVOKED...................passed
And the account does have pending charged off with reason internal..........passed
When a suspense reversal transaction of CAD 300 with plan type R is received on 2023-10-12 and effective on 2023-02-12.passed
Then a journal entry of CAD 300 with type SUSPENSE, reason DISPUTED_CHARGE_REVERSAL and PURCHASE term type is RECORDED.passed
And the account status is COLLECTIONS with reason REVOKED effective on 2023-07-25.passed
And the account does have pending charged off with reason internal..........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Suspense impact on charge off" name="Manual charge-off account when all outstanding dispute gets resolved" time="13.257">
        <system-out>
            <![CDATA[Given today is 2023-09-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 25.passed
And the account status is ACTIVE with reason ACTIVE.........................passed
And a card purchase of CAD 500 with an effective date 2023-09-10 is received on 2023-09-10.passed
And the billing period ends.................................................passed
And a suspense transaction of CAD 500 with plan type R is received on 2023-10-05 and effective on 2023-09-10.passed
Then a journal entry of CAD 500 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When Account is Charged off on 2023-10-15 by a Customer Care Professional with status "3" and reason "C".passed
Then the account status is ACTIVE with reason ACTIVE........................passed
And the account does have pending charged off with reason CREDIT_LOSS.......passed
When a suspense reversal transaction of CAD 500 with plan type R is received on 2023-10-18 and effective on 2023-09-10.passed
Then a journal entry of CAD 500 with type SUSPENSE, reason DISPUTED_CHARGE_REVERSAL and PURCHASE term type is RECORDED.passed
And the account status is CHARGE_OFF with reason INTERNAL effective on 2023-10-18.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Suspense impact on charge off" name="Do not manual charge-off account after dispute is resolved partially" time="13.044">
        <system-out>
            <![CDATA[Given today is 2023-09-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 25.passed
And the account status is ACTIVE with reason ACTIVE.........................passed
And a card purchase of CAD 500 with an effective date 2023-09-10 is received on 2023-09-10.passed
And a card purchase of CAD 300 with an effective date 2023-09-12 is received on 2023-09-12.passed
And the billing period ends.................................................passed
And a suspense transaction of CAD 500 with plan type R is received on 2023-10-05 and effective on 2023-09-10.passed
Then a journal entry of CAD 500 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When a suspense transaction of CAD 300 with plan type R is received on 2023-10-08 and effective on 2023-09-12.passed
Then a journal entry of CAD 500 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is RECORDED.passed
When Account is Charged off on 2023-10-15 by a Customer Care Professional with status "3" and reason "C".passed
Then the account status is ACTIVE with reason ACTIVE........................passed
And the account does have pending charged off with reason CREDIT_LOSS.......passed
When a suspense reversal transaction of CAD 500 with plan type R is received on 2023-10-18 and effective on 2023-09-10.passed
Then a journal entry of CAD 500 with type SUSPENSE, reason DISPUTED_CHARGE_REVERSAL and PURCHASE term type is RECORDED.passed
And the account status is ACTIVE with reason ACTIVE effective on 2023-09-01.passed
And the account does have pending charged off with reason CREDIT_LOSS.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Suspense Rejected because the Balance is less than the Dispute" name="Dispute rejected because billing period effective balance is less than dispute amount" time="21.266">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-02-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
And the currently open billing period started 2023-01-02 and ends 2023-02-02.passed
And a card purchase of CAD 100 with an effective date 2023-01-05 is received on 2023-01-05.passed
And the billing period ends.................................................passed
And the currently open billing period started 2023-02-03 and ends 2023-03-02.passed
And a CAD 120 membership fee is charged.....................................passed
And the total effective balance on 2023-02-02 is CAD 220.00.................passed
And the effective balance breakdown on 2023-02-02 is the following:.........passed
Then the total balance is CAD 220.00 and balance breakdown looks like the following:.passed
And the period demands are:.................................................passed
And a card purchase of CAD 500 with an effective date 2023-02-05 is received on 2023-02-05.passed
When a suspense transaction of CAD 550 with plan type R is received on 2023-02-08 and effective on 2023-02-05.passed
Then a journal entry of CAD 550 with type SUSPENSE, reason DISPUTED_CHARGE and PURCHASE term type is REJECTED.passed
When the current business date for given country is 2023-02-09..............passed
Then Generate "TRANSACTION" End Of Day Files for current country code on date 2023-02-08.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the currently open billing period started 2023-03-03 and ends 2023-04-02.passed
And the effective balance breakdown on 2023-03-02 is the following:.........passed
And the period demands are:.................................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Suspense Rejected because the Balance is less than the Dispute" name="Suspense Rejected And Suspense Reversal Rejected and both in Transaction file with correct posting flags" time="95.975">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 27 days of the country.passed
When a suspense transaction of CAD 150 with plan type R is received on 2021-06-01 and effective on 2021-06-01.passed
Then the transaction of CAD 150 made on 2021-06-01 is Rejected as PRINCIPAL_DEBIT_MISMATCH.passed
When a suspense reversal transaction of CAD 100 with plan type R is received on 2021-06-01 and effective on 2021-06-01.passed
Then the transaction of CAD 100 made on 2021-06-01 is Rejected as PRINCIPAL_SUSPENSE_MISMATCH.passed
When the business date rolls over for current country.......................passed
Then the country code is registered for EoD file creation for given business date.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account status change when block code received" name="Account status update without block code 2" time="6.524">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And a AIR_CANADA_PREMIUM user is added to the account.......................passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
And USER relationship status is ACTIVE with no reason change................passed
When a block code change is submitted with the following values:............passed
Then the account status should be "CANCELLED" with reason "CUSTOMER_REQUEST".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
And USER relationship status gets updated to CANCELLED with reason "CM-REQUEST".passed
And HOLDER payment device status is ACTIVE..................................passed
And USER payment device status is ACTIVE....................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account status change when block code received" name="Account status update with block code 2" time="4.018">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And a block code change is submitted with block code 1 V with block code 1 date 2022-01-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "INTERNAL".......passed
When a block code change for HOLDER is submitted with the following values:.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account status change when block code received" name="Account status update with no last block code 2" time="3.431">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given the account status is amended to "COLLECTIONS" with reason "REVOKED" on date 2022-01-03.passed
When a block code change is submitted with the following values:............passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account status change when block code received" name="Account status update with last block code 2" time="3.399">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given the account status is amended to "COLLECTIONS" with reason "OUTSIDE_AGENCY" on date 2022-01-05.passed
When a block code change is submitted with the following values:............passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Capture additional transaction types and reasons" name="Validate that REGISTERED_CARD_REVERSAL transaction is received from GCNS gateways and the end of the day files and are generated and sent to Globestar" time="608.15">
        <failure message="Condition with alias '[2024-06-17T23:18:49.017515] Assert Journal Entry, with type [null] and reason [REGISTERED_CARD_REVERSAL], for Account [49bd6fc4-408e-493b-9e95-d7bbbcb5659c]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: REGISTERED_CARD_REVERSAL&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a RegisteredCardReversal transaction is received from GCNS for "Alice" with the current business date.passed
And a REGISTERED_CARD_REVERSAL of 5.00 is recorded for "Alice"..............failed
And 1 transactions exist for "Alice" with the current business date and account is cycling.skipped
And roll the account business date of "Alice" to current country business date.skipped
When the business date rolls over for the country...........................skipped
Then the country code is registered for EoD file creation for given business date.skipped
And "Alice" account is registered for "EOD" File creation for given business date.skipped
Then validate that the following files for country code get generated and sent to Globestar.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:18:49.017515] Assert Journal Entry, with type [null] and reason [REGISTERED_CARD_REVERSAL], for Account [49bd6fc4-408e-493b-9e95-d7bbbcb5659c]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: REGISTERED_CARD_REVERSAL
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a REGISTERED_CARD_REVERSAL of 5.00 is recorded for "Alice"(classpath:features/gateway/AdditionalTransactions.feature:8)
]]>
        </failure>
    </testcase>
    <testcase classname="Handle accounts go through the Account Takeover process" name="Validate in EOD that account Open date gets updated with takeover date and membership fee is calculated successfully" time="79.019">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country with end of day time at 00:00.passed
When a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And globestar account takeover reported event is received for "Bob" account with takeover date 2021-07-27.passed
And roll the account business date of "Bob" to current country business date.passed
And the business date rolls over for the country............................passed
And the country code is registered for EoD file creation for given business date.passed
And "Bob" account is registered for "EOC" File creation for given business date.passed
Then validate "ACCOUNT_BALANCE" file contains "Bob" account with current balance of CAD 599.00 and total number of records 1.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change" time="3.303">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "REVOKED".......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 2" time="3.322">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 A and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "OUTSIDE_AGENCY".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 3" time="3.341">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 B and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "BANKRUPT"......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 4" time="3.363">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 D and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "DECEASED"......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 5" time="3.548">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 K and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "CLOSED"........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 6" time="3.417">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 W and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "SETTLEMENT"....passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 7" time="3.391">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 Z and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "TERMS_AGREED_WITH_CM".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 8" time="3.354">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 D with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "DECEASED"........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 9" time="3.308">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 D with block code 1 date 2021-10-02 block code 2 A and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "DECEASED_OUTSIDE_AGENCY".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 10" time="3.335">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 D with block code 1 date 2021-10-02 block code 2 B and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "DECEASED_BANKRUPT".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 11" time="3.311">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 F with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "FRAUD"...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 12" time="3.319">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 J with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "INACTIVE"........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 13" time="3.363">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 Q with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "SERVICE_COMPLAINT".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 14" time="3.312">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 T with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "TRANSFER"........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 15" time="3.113">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "INTERNAL".......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 16" time="3.307">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 A and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "OUTSIDE_AGENCY".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 17" time="3.109">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 B and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 18" time="3.356">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 D and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "DECEASED_LEGAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 19" time="3.351">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 K and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "CLOSED".........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 20" time="3.309">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 P and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "DEAD_RESERVE"...passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 21" time="3.163">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-10-02 block code 2 W and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "SETTLEMENT".....passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account block code change 22" time="3.385">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 X with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CANCELLED" with reason "CUSTOMER_REQUEST".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Account status is changed via block code then reverted back to active" time="4.654">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 B and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "BANKRUPT"......passed
And today is 2021-10-03.....................................................passed
And a block code change is submitted with block code 1 ' ' with block code 1 date 2021-10-03 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Block Code 1 change request is received and shown in EOD files" time="69.147">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-04-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a card purchase of CAD 500.00 is made on 2022-04-10....................passed
Then a MERCHANT_CHARGE of 500.00 is recorded................................passed
When a block code change is submitted with block code 1 F with block code 1 date 2022-04-10 block code 2 ' ' and card level block code ' ' at start of day.passed
Then the account status should be "CANCELLED" with reason "FRAUD"...........passed
When the business date rolls over for current country.......................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Alice" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Block Code 1 with Block Code 2 change request is received and shown in EOD files" time="95.24">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-04-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a card purchase of CAD 500.00 is made on 2022-04-10....................passed
Then a MERCHANT_CHARGE of 500.00 is recorded................................passed
When a block code change is submitted with block code 1 V with block code 1 date 2022-04-10 block code 2 B and card level block code ' ' at start of day.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
When the business date rolls over for current country.......................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Alice" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Block Code 2 change requests and Return Payment journal entries with different priorities are received on multiple days" time="377.749">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-06-08 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 5 days of the country.passed
And a card purchase of CAD 5.00 is made on 2022-06-08.......................passed
And a block code change is submitted with block code 1 ' ' with block code 1 date 2022-06-08 block code 2 M and card level block code ' ' at current instant.passed
And the business date rolls over for current country........................passed
And the country code is registered for EoD file creation for given business date.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When today is 2022-06-09....................................................passed
And a block code change is submitted with block code 1 ' ' with block code 1 date 2022-06-09 block code 2 E and card level block code ' ' at current instant.passed
And the business date rolls over for current country........................passed
And the country code is registered for EoD file creation for given business date.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When today is 2022-06-10....................................................passed
And a payment of CAD 5.00 is made on 2022-06-10.............................passed
And a payment of CAD 5.00 effective on 2022-06-10 is reversed on 2022-06-10 with reason RETURNED_PAYMENT_NSF.passed
When the business date rolls over for current country.......................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When today is 2022-06-11....................................................passed
And a card purchase of CAD 5.00 is made on 2022-06-11.......................passed
And a block code change is submitted with block code 1 ' ' with block code 1 date 2022-06-11 block code 2 ' ' and card level block code ' ' at current instant.passed
And the business date rolls over for current country........................passed
And the country code is registered for EoD file creation for given business date.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account block code change" name="Event Sequencing for payment device block code changed when an out of sequence 'lost' is handled before 'active'" time="12.516">
        <system-out>
            <![CDATA[Given today is 2023-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2023-01-02.....................................................passed
And customer card is 'ACTIVE'...............................................passed
When the first block code change event is submitted with card block code 'L' and previous card block code ' ', it failed to publish..passed
Then verify the card status is 'ACTIVE'.....................................passed
When the second block code change event is submitted with card block code ' ' and previous card block code 'L', it will not be published due to out of sequence..passed
Then verify the card status is 'ACTIVE'.....................................passed
And reprocess the 1st request which will change the card status.............passed
Then verify the event sequence first 'lost' then 2nd will 'reinstate-cm-request'.passed
Then verify the card status is 'ACTIVE' and reason 'reinstate-cm-request'...passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Seperate Globestar Events trigger both Card Invalidation and Card Replacement" name="An Aeroplan card is invalidated from Globestar to MARS" time="3.684">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
When a block code change is submitted with block code 1 ' ' and block code 2 ' ' and card level block code L.passed
Then account holder payment device has been invalidated for reason L........passed
And the effective date of the payment device status is 2021-10-02...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Seperate Globestar Events trigger both Card Invalidation and Card Replacement" name="An Aeroplan Card is invalidated with reason Transfered and then Replaced From Globestar to MARS" time="3.414">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
When a block code change is submitted with block code 1 ' ' and block code 2 ' ' and card level block code U.passed
And account holder payment device has been transferred for reason "card-replacement".passed
And the effective date of the payment device status is 2021-10-02...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Seperate Globestar Events trigger both Card Invalidation and Card Replacement" name="An Aeroplan Card is invalidated with reason Lost and then Replaced From Globestar to MARS" time="4.342">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
When a block code change is submitted with block code 1 ' ' and block code 2 ' ' and card level block code L.passed
Then account holder payment device has been invalidated for reason L........passed
And the effective date of the payment device status is 2021-10-02...........passed
When a replacement card issued event is sent from Globestar for reason "Lost".passed
Then account holder card number has been replaced...........................passed
And the effective date of the payment device status is 2021-10-02...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Seperate Globestar Events trigger both Card Invalidation and Card Replacement" name="An Aeroplan Card is invalidated with reason Stolen and then Replaced From Globestar to MARS" time="4.345">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
When a block code change is submitted with block code 1 ' ' and block code 2 ' ' and card level block code S.passed
Then account holder payment device has been invalidated for reason S........passed
And the effective date of the payment device status is 2021-10-02...........passed
When a replacement card issued event is sent from Globestar for reason "Stolen".passed
Then account holder card number has been replaced...........................passed
And the effective date of the payment device status is 2021-10-02...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Seperate Globestar Events trigger both Card Invalidation and Card Replacement" name="An Aeroplan Card is invalidated with reason Non-Received and then Replaced From Globestar to MARS" time="4.355">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
When a block code change is submitted with block code 1 ' ' and block code 2 ' ' and card level block code O.passed
Then account holder payment device has been invalidated for reason O........passed
And the effective date of the payment device status is 2021-10-02...........passed
When a replacement card issued event is sent from Globestar for reason "Non-Received".passed
Then account holder card number has been replaced...........................passed
And the effective date of the payment device status is 2021-10-02...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Account manual charge off + direct debit" time="17.692">
        <system-out>
            <![CDATA[Given today is 2019-05-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 15.passed
When the account is enrolled in a STATEMENT_BALANCE Direct Debit Program on 2019-05-03.passed
And the currently open billing period started 2019-05-02 and ends 2019-05-15.passed
And the billing period ends.................................................passed
And the total customer balance on 2019-05-16 is CAD 599.00..................passed
And a payment of CAD 599.00 is made on 2019-05-21...........................passed
And a card purchase of CAD 15.00 is made on 2019-05-21......................passed
And the billing period ends.................................................passed
And a card purchase of CAD 20.00 is made on 2019-06-21......................passed
And the minimum payment obligation has not been met by grace date...........passed
And the billing period ends.................................................passed
Given today is 2019-07-15...................................................passed
When Account is Charged off by a Customer Care Professional with status "3" and reason "C".passed
Then the account status should be "Charge_Off" with reason "INTERNAL".......passed
Then there is no active Direct Debit on the account.........................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="When Account is automatically charged off due to excessive age, EOD shows entry in Transaction file" time="47.846">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 27 days of the country.passed
And the billing period ends.................................................passed
And the total account balance is CAD 120.00.................................passed
And the billing period ends.................................................passed
And the account age is 30 days..............................................passed
And the billing period ends.................................................passed
And the account age is 60 days..............................................passed
And the billing period ends.................................................passed
And the account age is 90 days..............................................passed
And the billing period ends.................................................passed
And the account age is 120 days.............................................passed
And the billing period ends.................................................passed
And the account age is 150 days.............................................passed
And the billing period ends.................................................passed
And the account age is 180 days.............................................passed
And the billing period ends.................................................passed
When the account age is 210 days............................................passed
Then the account is automatically charged off with status "Charge_Off" and reason "INTERNAL".passed
When the current business date for given country is 2022-08-29..............passed
Then Generate "TRANSACTION" End Of Day Files for current country code on date 2022-08-28.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="EOD shows correct block code details for Manual Charge Off event" time="90.617">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-06-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a card purchase of CAD 5.00 is made on 2023-06-10......................passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2023-06-10 block code 2 B and card level block code ' ' at start of day.passed
Then the account status should be "COLLECTIONS" with reason "BANKRUPT"......passed
When Account is Charged off by a Customer Care Professional with status "3" and reason "B".passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
When the business date rolls over for current country.......................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Include both Block Code 1 and 2 in EOD file for Consecutive Days" time="179.963">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-06-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a card purchase of CAD 5.00 is made on 2023-06-10......................passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2023-06-10 block code 2 B and card level block code ' ' at start of day.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
When today is 2023-06-10....................................................passed
And the business date rolls over for current country........................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
When today is 2023-06-11....................................................passed
And the business date rolls over for current country........................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Manual Charge-Off request received for an account with non-charge-off status -" time="4.561">
        <system-out>
            <![CDATA[Given today is 2021-11-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-11-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-11-02 block code 2 Z and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "TERMS_AGREED_WITH_CM".passed
And today is 2021-11-03.....................................................passed
When Account is Charged off by a Customer Care Professional with status "3" and reason "C".passed
Then the account status should be "CHARGE_OFF" with reason "TERMS_AGREED_WITH_CM".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Manual Charge-Off request received for an account with non-charge-off status - 2" time="4.554">
        <system-out>
            <![CDATA[Given today is 2021-10-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-10-02.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "REVOKED".......passed
And today is 2021-10-03.....................................................passed
When Account is Charged off by a Customer Care Professional with status "3" and reason "C".passed
Then the account status should be "CHARGE_OFF" with reason "INTERNAL".......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Auto Charge-Off request received for an account with non-charge-off status -" time="37.98">
        <system-out>
            <![CDATA[Given today is 2019-03-10...................................................passed
And a new SIMPLY_CASH credit application is submitted.......................passed
And the account age is current..............................................passed
And the payment variance is CAD 9.99........................................passed
And the membership fee is CAD 99.00.........................................passed
And the total account balance is CAD 0.00...................................passed
And the billing period ends.................................................passed
And the account age is current..............................................passed
And the billing period ends.................................................passed
And the account age is 30 days..............................................passed
And the billing period ends.................................................passed
And the account age is 60 days..............................................passed
And the billing period ends.................................................passed
And the account age is 90 days..............................................passed
And the billing period ends.................................................passed
And the account age is 120 days.............................................passed
And the billing period ends.................................................passed
And the account age is 150 days.............................................passed
And the billing period ends.................................................passed
And the account age is 180 days.............................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2019-10-02 block code 2 Z and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "TERMS_AGREED_WITH_CM".passed
And the billing period ends.................................................passed
When the account age is 210 days............................................passed
And the billing period ends.................................................passed
Then the account is automatically charged off with status "CHARGE_OFF" and reason "TERMS_AGREED_WITH_CM".passed
And today is 2019-12-11.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2019-12-11 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "TERMS_AGREED_WITH_CM".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Auto Charge-Off request received for an account with non-charge-off status - 2" time="36.118">
        <system-out>
            <![CDATA[Given today is 2019-03-10...................................................passed
And a new SIMPLY_CASH credit application is submitted.......................passed
And the account age is current..............................................passed
And the payment variance is CAD 9.99........................................passed
And the membership fee is CAD 99.00.........................................passed
And the total account balance is CAD 0.00...................................passed
And the billing period ends.................................................passed
And the account age is current..............................................passed
And the billing period ends.................................................passed
And the account age is 30 days..............................................passed
And the billing period ends.................................................passed
And the account age is 60 days..............................................passed
And the billing period ends.................................................passed
And the account age is 90 days..............................................passed
And the billing period ends.................................................passed
And the account age is 120 days.............................................passed
And the billing period ends.................................................passed
And the account age is 150 days.............................................passed
And the billing period ends.................................................passed
And the account age is 180 days.............................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2019-10-02 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "REVOKED".......passed
And the billing period ends.................................................passed
When the account age is 210 days............................................passed
And the billing period ends.................................................passed
Then the account is automatically charged off with status "CHARGE_OFF" and reason "INTERNAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Account status is already charged-off and receiving new block code event for non-charge-off and valid reason code with charge-off" time="6.247">
        <system-out>
            <![CDATA[Given today is 2021-12-20...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-12-21.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-12-22 block code 2 B and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
And today is 2021-12-23.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-12-23 block code 2 Z and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "TERMS_AGREED_WITH_CM".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Account status is already charged-off and receiving new block code event for non-charge-off and invalid reason code with charge-off" time="4.059">
        <system-out>
            <![CDATA[Given today is 2021-12-20...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-12-21.....................................................passed
And the account status is amended to "CHARGE_OFF" with reason "BANKRUPT_LEGAL" on date 2021-12-22.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
And today is 2021-12-23.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-12-23 block code 2 ' ' and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "BANKRUPT_LEGAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Current Account status not is not TERMS_AGREED_WITH_CM and changing the account status via block code event BC1:'V' and BC2:'Z'." time="4.582">
        <system-out>
            <![CDATA[Given today is 2021-12-20...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
And today is 2021-12-21.....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2021-12-21 block code 2 B and card level block code ' '.passed
Then the account status should be "COLLECTIONS" with reason "BANKRUPT"......passed
And today is 2021-12-22.....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2021-12-22 block code 2 Z and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "TERMS_AGREED_WITH_CM".passed
And today is 2021-12-23.....................................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Validating ABAL EOD file block code values for a manually charged off account after updating the account status with the new status and new reason" time="259.218">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-06-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 2 days of the country.passed
When a card purchase of CAD 50.00 is made on 2022-06-10.....................passed
Then a MERCHANT_CHARGE of 50.00 is recorded.................................passed
When Account is Charged off by a Customer Care Professional with status "3" and reason "C".passed
Then the account status should be "CHARGE_OFF" with reason "INTERNAL".......passed
And the business date rolls over for current country........................passed
When today is 2022-06-11....................................................passed
And a block code change is submitted with block code 1 C with block code 1 date 2022-06-11 block code 2 Z with previous block code 1 ' ' and previous block code 2 ' ' and card level block code ' ' at start of day.passed
Then the account status should be "CHARGE_OFF" with reason "TERMS_AGREED_WITH_CM".passed
And the business date rolls over for current country........................passed
When today is 2022-06-12....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2022-06-12 block code 2 D with previous block code 1 C and previous block code 2 Z and card level block code ' ' at start of day.passed
Then the account status should be "CHARGE_OFF" with reason "DECEASED_LEGAL".passed
And the business date rolls over for current country........................passed
Then the country code is registered for EoD file creation for given business date.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Validating block code values for a Auto charged off account after updating the account status with same status but new reason code" time="80.25">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-03-10 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
And the account age is current..............................................passed
When a card purchase of CAD 50.00 is made on 2022-03-10.....................passed
Then a MERCHANT_CHARGE of 50.00 is recorded.................................passed
And the total account balance is CAD 50.00..................................passed
When today is 2022-03-10....................................................passed
And the business date rolls over for current country........................passed
And the billing period ends.................................................passed
And the account age is current..............................................passed
And the billing period ends.................................................passed
And the account age is 30 days..............................................passed
And the billing period ends.................................................passed
And the account age is 60 days..............................................passed
And the billing period ends.................................................passed
And the account age is 90 days..............................................passed
And the billing period ends.................................................passed
And the account age is 120 days.............................................passed
And the billing period ends.................................................passed
And the account age is 150 days.............................................passed
And the billing period ends.................................................passed
And the account age is 180 days.............................................passed
And the billing period ends.................................................passed
When the account age is 210 days............................................passed
And the billing period ends.................................................passed
Then the account is automatically charged off with status "Charge_Off" and reason "INTERNAL".passed
When today is 2022-12-10....................................................passed
And a block code change is submitted with block code 1 V with block code 1 date 2022-12-10 block code 2 D with previous block code 1 V and previous block code 2 ' ' and card level block code ' ' at start of day.passed
Then the account status should be "CHARGE_OFF" with reason "DECEASED_LEGAL".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Account charge off" name="Charged off account with spend between period start and charge off date should calculate and report the minimum payment and period demand" time="25.455">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-01-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted with cycle day 01 under current country.passed
Then the currently open billing period started 2022-01-02 and ends 2022-02-01.passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the currently open billing period started 2022-02-02 and ends 2022-03-01.passed
And a card purchase of CAD 100 with an effective date 2022-02-10 is received on 2022-02-10.passed
When the billing period ends................................................passed
Then a journal entry of CAD 0.09 with type INTEREST and reason DEFERRED_FINANCE_CHARGE is posted on 2022-03-01, effective 2022-03-01.passed
And a journal entry of CAD 2.76 with type INTEREST and reason BILLED_FINANCE_CHARGE is posted on 2022-03-01, effective 2022-03-01.passed
And the period demands are:.................................................passed
And the account age is 30 days..............................................passed
And the age breakdown is....................................................passed
And the currently open billing period started 2022-03-02 and ends 2022-04-01.passed
And a card purchase of CAD 150 with an effective date 2022-03-10 is received on 2022-03-10.passed
When a block code change is submitted with block code 1 V with block code 1 date 2022-03-12 block code 2 A and card level block code ' '.passed
Then the account status should be "CHARGE_OFF" with reason "OUTSIDE_AGENCY".passed
When the billing period ends................................................passed
Then the period demands are:................................................passed
And CAD 0.00 PURCHASE interest will be CHARGED..............................passed
And the account age is 30 days..............................................passed
And the age breakdown is....................................................passed
And the currently open billing period started 2022-04-02 and ends 2022-05-01.passed
When a backdated payment of CAD 140.00 is posted on 2022-04-19 with effective date 2022-03-05.passed
Then the period demands are:................................................passed
And CAD 0.00 PURCHASE interest will be CHARGED..............................passed
And the account age is current..............................................passed
When the billing period ends................................................passed
Then the period demands are:................................................passed
And CAD 0.00 PURCHASE interest will be CHARGED..............................passed
And the account age is current..............................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Status Change Messages received from G*" time="4.462">
        <system-out>
            <![CDATA[Given today is 2020-01-02...................................................passed
And a new SIMPLY_CASH credit application is submitted with cycle day 1......passed
When a direct debit enrolled of type "Minimum Due" is received on 2020-04-13.passed
Then there is an active Direct Debit on the account with enrollment type MIN_DUE.passed
When a direct debit cancelled is received on 2020-05-13.....................passed
Then there is no active Direct Debit on the account.........................passed
And the direct debit of type MIN_DUE is cancelled with the cancellation reason CUSTOMER_CANCELLED on 2020-05-13.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Status Change Messages received from G*, cancellation on enrollment date" time="7.231">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-09-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a direct debit enrolled of type "Full Payment" is received on 2022-09-15.passed
Then there is an active Direct Debit on the account with enrollment type STATEMENT_BALANCE.passed
When a direct debit cancelled is received on 2022-09-15.....................passed
Then there is no active Direct Debit on the account.........................passed
And the direct debit of type STATEMENT_BALANCE is cancelled with the cancellation reason CUSTOMER_CANCELLED on 2022-09-15.passed
And the current business date for given country is 2022-09-16...............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-09-15.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Status Change Messages received from G*, cancellation between enrollment date and start date" time="17.706">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-09-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a direct debit enrolled of type "Full Payment" is received on 2022-09-15.passed
Then there is an active Direct Debit on the account with enrollment type STATEMENT_BALANCE.passed
When a direct debit cancelled is received on 2022-09-20.....................passed
Then there is no active Direct Debit on the account.........................passed
And the direct debit of type STATEMENT_BALANCE is cancelled with the cancellation reason CUSTOMER_CANCELLED on 2022-09-20.passed
And the current business date for given country is 2022-09-21...............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-09-20.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Status Change Messages received from G*, Change type then cancel before start date" time="11.396">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-10-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a direct debit enrolled of type "Full Payment" is received on 2022-10-15.passed
Then there is an active Direct Debit on the account with enrollment type STATEMENT_BALANCE.passed
When a direct debit enrolled of type "Minimum Due" is received on 2022-10-15.passed
Then there is an active Direct Debit on the account with enrollment type MIN_DUE.passed
When a direct debit cancelled is received on 2022-10-15.....................passed
Then there is no active Direct Debit on the account.........................passed
And the direct debit of type MIN_DUE is cancelled with the cancellation reason CUSTOMER_CANCELLED on 2022-10-15.passed
And the current business date for given country is 2022-10-16...............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-10-15.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Status Change Messages received from G*, cancellation between enrollment date and start date" time="4.346">
        <system-out>
            <![CDATA[Given today is 2020-01-02...................................................passed
And a new SIMPLY_CASH credit application is submitted with cycle day 1......passed
When a direct debit enrolled of type "Minimum Due" is received on 2020-04-13.passed
Then there is an active Direct Debit on the account with enrollment type MIN_DUE.passed
When a direct debit cancelled is received on 2020-04-15.....................passed
Then there is no active Direct Debit on the account.........................passed
And the direct debit of type MIN_DUE is cancelled with the cancellation reason CUSTOMER_CANCELLED on 2020-04-15.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Suspense Messages received from G*" time="113.591">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 1 days of the country.passed
When a direct debit enrolled of type "Full Payment" is received on 2023-01-01.passed
Then there is an active Direct Debit on the account with enrollment type STATEMENT_BALANCE.passed
And the active Direct Debit on the account has a start date of 2023-01-02...passed
And the billing period ends.................................................passed
And a direct debit is suspended on 2023-01-04...............................passed
And a STATEMENT_BALANCE direct debit is suspended on 2023-01-04 with end date 2023-02-02 and cancellation reason CUSTOMER_SUSPENDED.passed
And the current business date for given country is 2023-01-05...............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-01-04.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
And the current business date for given country is 2023-01-27...............passed
And no DIRECT_DEBIT is credited with posting date 2023-01-27................passed
When the billing period ends................................................passed
And the current business date for given country is 2023-02-03...............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-02-02.passed
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="Direct Debit Full Payment" time="173.252">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 10 days of the country.passed
And a card purchase of CAD 1000.00 with an effective date 2023-01-05 is received on 2023-01-05.passed
When a direct debit enrolled of type "Full Payment" is received on 2023-01-07.passed
Then there is an active Direct Debit on the account with enrollment type STATEMENT_BALANCE.passed
And the active Direct Debit on the account has a start date of 2023-01-11...passed
When the billing period ends................................................passed
And the current business date for given country is 2023-01-12...............passed
Then the total account balance is CAD 1120.00...............................passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2023-01-11.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
And a payment of CAD 1100.00 is made on 2023-01-28..........................passed
Then the total account balance is CAD 20.00.................................passed
When the current business date for given country is 2023-02-05..............passed
Then a journal entry of CAD 1120.00 with type PAYMENT and reason DIRECT_DEBIT is posted on 2023-02-05, effective 2023-02-05.passed
And Generate "ACCOUNT_BALANCE,TRANSACTION" End Of Day Files for current country code on date 2023-02-04.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
Then the total account balance on 2023-02-05 is CAD -1100.00................passed
And the current business date for given country is 2023-02-06...............passed
Then Generate "ACCOUNT_BALANCE,TRANSACTION" End Of Day Files for current country code on date 2023-02-05.passed
Then "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.passed
And "TRANSACTION" file contains records for "Bob" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Direct Debit Allocation" name="AC1 Account balance is greater than 0 MRDS-18928" time="120.096">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And the account is enrolled in a STATEMENT_BALANCE Direct Debit Program on 2022-01-03.passed
And a card purchase of CAD 1000.00 is made on 2022-01-03....................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 1120.00...............................passed
When a payment of CAD 620.00 is made on 2022-02-15..........................passed
And a card purchase of CAD 500 with posting date 2022-02-16 is returned with effective date 2022-02-15.passed
And a card purchase of CAD 100.00 is made on 2022-02-16.....................passed
Then the total account balance is CAD 100.00................................passed
When today is 2022-02-16....................................................passed
And the account reaches the end of the day..................................passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-02-16.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
When today is 2022-02-22....................................................passed
And the account reaches the end of the day..................................passed
Then a journal entry of CAD 1120.00 with type PAYMENT and reason DIRECT_DEBIT is RECORDED.passed
Then the total account balance is CAD -1020.00..............................passed
And the account reaches the end of the day..................................passed
And Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-02-22.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation With Gateway Transactions" name="Validate that all end of the day files are generated and sent to Globestar for transactions received from all gateways" time="614.249">
        <failure message="Condition with alias '[2024-06-17T23:23:20.543383] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [bf3762a8-cab7-4725-ac2f-8e515720a639]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=06ad8665-f1db-4f53-94fe-18c50aa7a30d, paymentDeviceId=185bb2ed-3c83-4b1e-bbe0-61216937d0eb, relationshipId=6ce7d72c-dd61-45f3-a8a3-a97c1913f385, transactionId=5cc37357-b110-4649-81bb-0f4b9f7efa35, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-08, effectiveDate=2021-06-08, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=cc0214cd-831e-40e8-ad78-04b398166a3c, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=550ae611-9ab6-4ee9-9608-8ca89028fdca, paymentDeviceId=185bb2ed-3c83-4b1e-bbe0-61216937d0eb, relationshipId=6ce7d72c-dd61-45f3-a8a3-a97c1913f385, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-08, effectiveDate=2021-06-08, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=cc0214cd-831e-40e8-ad78-04b398166a3c, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=06ad8665-f1db-4f53-94fe-18c50aa7a30d, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a SINGLE_CASH transaction is received from FINCAP for "Bob,Alice" with the current business date in 15 days.passed
And a SinglePurchaseMerchantCharge transaction is received from GCNS for "Bob,Alice" with the current business date in 15 days.passed
And 1 of CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"...................passed
And 1 of MERCHANT_CHARGE of 5.00 is recorded for "Bob"......................failed
And 1 of CASH_ADVANCE_ATM of 100.00 is recorded for "Alice".................skipped
And 1 of MERCHANT_CHARGE of 5.00 is recorded for "Alice"....................skipped
And roll the account business date of "Bob" to current country business date.skipped
And roll the account business date of "Alice" to current country business date.skipped
And a SINGLE_CASH transaction is received from FINCAP for "Bob,Alice" with the current business date.skipped
And a SinglePurchaseMerchantCharge transaction is received from GCNS for "Bob,Alice" with the current business date.skipped
And a SINGLE_BALANCE_TRANSFER transaction is received from GNA for "Bob,Alice" with the current business date.skipped
And a SINGLE_CASH_BACK transaction is received from STAR for "Bob,Alice" with the current business date.skipped
And 2 of CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"...................skipped
And 2 of MERCHANT_CHARGE of 5.00 is recorded for "Bob"......................skipped
And 2 of CASH_ADVANCE_ATM of 100.00 is recorded for "Alice".................skipped
And 2 of MERCHANT_CHARGE of 5.00 is recorded for "Alice"....................skipped
And a BALANCE_TRANSFER of 1000.00 is recorded for "Bob".....................skipped
And a BALANCE_TRANSFER of 1000.00 is recorded for "Alice"...................skipped
And a CASHBACK_STATEMENT_CREDIT of 10.00 is recorded for "Bob"..............skipped
And a CASHBACK_STATEMENT_CREDIT of 10.00 is recorded for "Alice"............skipped
And 6 transactions exist for "Bob" with the current business date and account is cycling.skipped
And 6 transactions exist for "Alice" with the current business date and account is cycling.skipped
When the business date rolls over for the country...........................skipped
Then the country code is registered for EoD file creation for given business date.skipped
And "Alice" account is registered for "EOD" File creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
And 6 valid unique reference numbers are created for "Alice" for the transactions in the transactions EOD file.skipped
And 9 valid unique reference numbers are created for "Bob" for the transactions in the transactions EOD file.skipped
And 15 valid unique reference numbers are created for all the transactions in the file.skipped
And validate "ACCOUNT_BALANCE" file contains "Alice" account with current balance of CAD 1235.50 and total number of records 1.skipped
And validate "SUB_BALANCE" file contains "Alice" account with current balance of CAD 1235.50 and total number of records 3.skipped
And validate "TRANSACTION" file contains "Alice" account with total transaction amount of CAD 1127.75 and total number of records 6.skipped
And validate "FAH" file contains "Alice" account with total transaction amount of CAD 1127.75 and total number of records 6.skipped
And validate "ACCOUNT_BALANCE" file contains "Bob" account with current balance of CAD 1336.22 and total number of records 1.skipped
And validate "SUB_BALANCE" file contains "Bob" account with current balance of CAD 1336.22 and total number of records 3.skipped
And validate "TRANSACTION" file contains "Bob" account with total transaction amount of CAD 1228.47 and total number of records 9.skipped
And validate "FAH" file contains "Bob" account with total transaction amount of CAD 1228.58 and total number of records 10.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:23:20.543383] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [bf3762a8-cab7-4725-ac2f-8e515720a639]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=06ad8665-f1db-4f53-94fe-18c50aa7a30d, paymentDeviceId=185bb2ed-3c83-4b1e-bbe0-61216937d0eb, relationshipId=6ce7d72c-dd61-45f3-a8a3-a97c1913f385, transactionId=5cc37357-b110-4649-81bb-0f4b9f7efa35, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-08, effectiveDate=2021-06-08, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=cc0214cd-831e-40e8-ad78-04b398166a3c, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=550ae611-9ab6-4ee9-9608-8ca89028fdca, paymentDeviceId=185bb2ed-3c83-4b1e-bbe0-61216937d0eb, relationshipId=6ce7d72c-dd61-45f3-a8a3-a97c1913f385, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-08, effectiveDate=2021-06-08, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=cc0214cd-831e-40e8-ad78-04b398166a3c, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=06ad8665-f1db-4f53-94fe-18c50aa7a30d, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:138)
	at ✽.1 of MERCHANT_CHARGE of 5.00 is recorded for "Bob"(classpath:features/gateway/EndOfDayFileGenerationWithGateways.feature:12)
]]>
        </failure>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation With Gateway Transactions" name="Validate that EOD TRANSACTION file contains unclassified transactions rejected at the gateway and mars journal rejection" time="313.145">
        <failure message="Condition with alias '[2024-06-17T23:23:57.047500] Assert Journal Entry, with type [null] and reason [null], for Account [74480cae-4d05-4b98-9ad9-82ab67a1c6ce]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 2 JournalEntries  with following properties:&#10; - postingDate: 2023-06-23&#10; - status: RECORDED&#10; but Found 1 matching Journal Entry [JournalEntry(journalEntryId=669fd8e1-ec29-4d78-b969-c52f99072a81, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=92616138-dfec-4625-a764-a0636e9dd6a4, transactionId=adfcd778-b5df-4ba4-b360-d512ffbce606, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-06-23, effectiveDate=2023-06-23, type=PURCHASE, description=Retail Sale, reason=MERCHANT_CHARGE, termId=c599aa79-7c6b-43c2-9c40-0e9befb1babb, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=f2ee9689-f66b-461b-967f-4f376380abf0, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=null, transactionId=0a2a6532-0cfa-4ac1-b6d6-c7e88c09026f, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=null, effectiveDate=2022-02-01, type=PAYMENT, description=null, reason=DIRECT_DEBIT_RETURNED_NSF, termId=null, billingAmount=100.0000000000, billingCurrency=CAD, status=REJECTED, credit=false, rejectionDate=2023-06-23, rejectionReason=OBSOLETE, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=669fd8e1-ec29-4d78-b969-c52f99072a81, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=92616138-dfec-4625-a764-a0636e9dd6a4, transactionId=adfcd778-b5df-4ba4-b360-d512ffbce606, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-06-23, effectiveDate=2023-06-23, type=PURCHASE, description=Retail Sale, reason=MERCHANT_CHARGE, termId=c599aa79-7c6b-43c2-9c40-0e9befb1babb, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2023-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a FINCAP file is received on the current business day containing:.......passed
And a "PURCHASE" transaction is received from globestar for CAD 50.00 with current business date in 0 days.passed
And a PurchaseAndUnclassifiable transaction is received from GCNS for "Alice" with the current business date in 0 days.passed
And a UNCLASSIFIABLE transaction is received from FINCAP for "Alice" with the current business date in 0 days.passed
And a "UNCLASSIFIABLE" transaction is received from globestar for CAD 50.00 with current business date in 0 days.passed
And the transaction is unclassified at GLOBESTAR Gateway for "Alice" for CAD 50.00.passed
And the transaction with processing code "380001" is unclassified at FINCAP Gateway for "Alice" as a CREDIT for CAD 100.00.passed
And the transaction with processing code "380000" is unclassified at FINCAP Gateway for "Alice" as a DEBIT for CAD 100.00.passed
And 2 transactions exist for "Alice" with the current business date and account is cycling.failed
And the transaction is unclassified at GCNS Gateway for "Alice" for CAD 5.00.skipped
And the transaction of CAD 100.00 made on 2022-02-01 is Rejected as OBSOLETE.skipped
And roll the account business date of "Alice" to current country business date.skipped
And the business date rolls over for the country............................skipped
When the country code is registered for EoD file creation for given business date.skipped
And "Alice" account is registered for "EOD" File creation for given business date.skipped
And validate "TRANSACTION" file contains "Alice" account with total transaction amount of CAD 210.00 and total number of records 7.skipped
And validate the below field matches for 2 records in "TRANSACTION" file for "Alice":.skipped
And validate the below field matches for 4 records in "TRANSACTION" file for "Alice":.skipped
And validate the below field matches for 1 records in "TRANSACTION" file for "Alice":.skipped
And validate "FAH" file contains "Alice" account with total transaction amount of CAD 210.00 and total number of records 7.skipped
And validate the below field matches for 1 records in "FAH" file for "Alice":.skipped
And validate the below field matches for 2 records in "FAH" file for "Alice":.skipped
And validate the below field matches for 4 records in "FAH" file for "Alice":.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:23:57.047500] Assert Journal Entry, with type [null] and reason [null], for Account [74480cae-4d05-4b98-9ad9-82ab67a1c6ce]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 2 JournalEntries  with following properties:
 - postingDate: 2023-06-23
 - status: RECORDED
 but Found 1 matching Journal Entry [JournalEntry(journalEntryId=669fd8e1-ec29-4d78-b969-c52f99072a81, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=92616138-dfec-4625-a764-a0636e9dd6a4, transactionId=adfcd778-b5df-4ba4-b360-d512ffbce606, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-06-23, effectiveDate=2023-06-23, type=PURCHASE, description=Retail Sale, reason=MERCHANT_CHARGE, termId=c599aa79-7c6b-43c2-9c40-0e9befb1babb, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)] 
All JournalEntries:
JournalEntry(journalEntryId=f2ee9689-f66b-461b-967f-4f376380abf0, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=null, transactionId=0a2a6532-0cfa-4ac1-b6d6-c7e88c09026f, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=null, effectiveDate=2022-02-01, type=PAYMENT, description=null, reason=DIRECT_DEBIT_RETURNED_NSF, termId=null, billingAmount=100.0000000000, billingCurrency=CAD, status=REJECTED, credit=false, rejectionDate=2023-06-23, rejectionReason=OBSOLETE, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=669fd8e1-ec29-4d78-b969-c52f99072a81, paymentDeviceId=3f5de637-9fd6-4a91-9166-49c9e483af66, relationshipId=92616138-dfec-4625-a764-a0636e9dd6a4, transactionId=adfcd778-b5df-4ba4-b360-d512ffbce606, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-06-23, effectiveDate=2023-06-23, type=PURCHASE, description=Retail Sale, reason=MERCHANT_CHARGE, termId=c599aa79-7c6b-43c2-9c40-0e9befb1babb, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.EndOfDayFileGeneration.verifyJournalExists(EndOfDayFileGeneration.java:1241)
	at ✽.2 transactions exist for "Alice" with the current business date and account is cycling(classpath:features/gateway/EndOfDayFileGenerationWithGateways.feature:60)
]]>
        </failure>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation With Gateway Transactions" name="Validate that rejected transactions are successfully purged and is reflected in EOD files" time="214.08">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 20 days of the country.passed
And a "credit" transaction with code "1234" is received from Globestar for CAD 10.00 400 days before current business date.passed
And a "debit" transaction with code "9997" is received from Globestar for CAD 20.00 400 days before current business date.passed
And a "credit" transaction with code "1234" is received from Globestar for CAD 30.00 400 days before current business date.passed
And a "debit" transaction with code "9997" is received from Globestar for CAD 40.00 400 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 10.00 400 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 20.00 400 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 30.00 400 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 40.00 400 days before current business date.passed
Then the business day for current country is the next EOD date..............passed
And roll the account business date of "Alice" to current country business date.passed
And the CREDIT CAD 10.00 GLOBESTAR transaction that was unclassified is reclassified with PURCHASE and MERCHANT_RETURN.passed
And the DEBIT CAD 20.00 GLOBESTAR transaction that was unclassified is reclassified with PURCHASE and MERCHANT_CHARGE.passed
And the CREDIT CAD 30.00 GLOBESTAR transaction that was unclassified is reclassified with PURCHASE and DISPUTED_CHARGE.passed
And the DEBIT CAD 40.00 GLOBESTAR transaction that was unclassified is reclassified with PURCHASE and DISPUTED_CHARGE_REVERSAL.passed
And the transaction of CAD 10.00 made on 2020-05-19 is Rejected as OBSOLETE.passed
And the transaction of CAD 20.00 made on 2020-05-19 is Rejected as OBSOLETE.passed
And the transaction of CAD 30.00 made on 2020-05-19 is Rejected as OBSOLETE.passed
And the transaction of CAD 40.00 made on 2020-05-19 is Rejected as OBSOLETE.passed
And the business date rolls over for the country............................passed
And "Alice" account is registered for "EOD" File creation for given business date.passed
And "FAH" file contains records for "Alice" with the following records:.....passed
Then the business day for current country is the next EOD date..............passed
And roll the account business date of "Alice" to current country business date.passed
And the CREDIT CAD 10.00 GLOBESTAR journal entry that was rejected is purged.passed
And the DEBIT CAD 20.00 GLOBESTAR journal entry that was rejected is purged.passed
And the CREDIT CAD 30.00 GLOBESTAR journal entry that was rejected is purged.passed
And the DEBIT CAD 40.00 GLOBESTAR journal entry that was rejected is purged.passed
Then the transaction of CAD 10.00 made on 2020-05-19 is Purged..............passed
Then the transaction of CAD 20.00 made on 2020-05-19 is Purged..............passed
Then the transaction of CAD 30.00 made on 2020-05-19 is Purged..............passed
Then the transaction of CAD 40.00 made on 2020-05-19 is Purged..............passed
And the business date rolls over for the country............................passed
And "Alice" account is registered for "EOD" File creation for given business date.passed
And "FAH" file contains 2 records for "Alice" with the following records:...passed
Then the business day for current country is the next EOD date..............passed
And roll the account business date of "Alice" to current country business date.passed
And the business date rolls over for the country............................passed
And "Alice" account is registered for "EOD" File creation for given business date.passed
And "FAH" file contains no records for "Alice"..............................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation With Gateway Transactions" name="Do not end days prior to the current country calendar" time="1.339">
        <system-out>
            <![CDATA[Given today is 2020-08-01...................................................passed
And a random country calendar is set up with end of day time at 00:00.......passed
When Globestar ends the day on 2020-01-05...................................passed
Then the business day under current country is 2020-08-01...................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation With Gateway Transactions" name="Validate that EOD FAH file contains purged rejected (at gateway) transactions" time="67.354">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a "credit" transaction with code "1234" is received from Globestar for CAD 140.00 with the current business date.passed
And an unclassifiable "credit" suspense transaction is received from Globestar for CAD 230.00 with the current business date.passed
And a "debit" transaction with code "9997" is received from Globestar for CAD 50.00 with the current business date.passed
And an unclassifiable "debit" suspense transaction is received from Globestar for CAD 460.00 with the current business date.passed
And a "credit" transaction with code "1234" is received from Globestar for CAD 370.00 1 days before current business date.passed
And a "debit" transaction with code "9997" is received from Globestar for CAD 580.00 1 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 140.00 on current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 230.00 on current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 50.00 on current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 460.00 on current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 370.00 1 days before current business date.passed
And 1 transactions are rejected at "GLOBESTAR" Gateway for "Alice" for CAD 580.00 1 days before current business date.passed
And the transaction of value "140.00" that is rejected at Globestar Gateway is purged on current business date.passed
And the transaction of value "230.00" that is rejected at Globestar Gateway is purged on current business date.passed
And the transaction of value "50.00" that is rejected at Globestar Gateway is purged on current business date.passed
And the transaction of value "460.00" that is rejected at Globestar Gateway is purged on current business date.passed
And the transaction of value "370.00" that is rejected at Globestar Gateway is purged 1 days before current business date.passed
And the transaction of value "580.00" that is rejected at Globestar Gateway is purged 1 days before current business date.passed
And the current business date for given country is 2023-06-24...............passed
And Generate "FAH" End Of Day Files for current country code on date 2023-06-23.passed
And "FAH" file contains 2 records for "Alice" with the following records:...passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation Without Gateway Transactions" name="Validate end of Day files are generated and sent to G* when the business date rolls for a given day" time="114.044">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And today is 0 days before the current business date........................passed
And a card purchase of CAD 100 is made by "Alice"...........................passed
And a cash withdrawal of CAD 50 is made by "Alice"..........................passed
And Validate that "Alice" account receives all necessary events as part of "Transaction Posting".passed
And today is 15 days before the current business date.......................passed
And a cash withdrawal of CAD 100 is made by "Bob"...........................passed
And a card purchase of CAD 100 is made by "Bob".............................passed
And Validate that "Bob" account receives all necessary events as part of "Transaction Posting".passed
And roll the account business date of "Alice" to current country business date.passed
And roll the account business date of "Bob" to current country business date.passed
When the business date rolls over for the country...........................passed
Then the country code is registered for EoD file creation for given business date.passed
And "Alice" account is registered for "EOD" File creation for given business date.passed
And "Bob" account is registered for "EOC" File creation for given business date.passed
And validate "SUB_BALANCE" file contains "Alice" account with current balance of CAD 152.75 and total number of records 3.passed
And validate plan numbers are "10001" and "10002" for CASH and PURCHASE balance in "SUB_BALANCE" file.passed
And validate "ACCOUNT_BALANCE" file contains "Alice" account with current balance of CAD 152.75 and total number of records 1.passed
And validate "SUB_BALANCE" file contains "Bob" account with current balance of CAD 302.78 and total number of records 3.passed
And validate "TRANSACTION" file contains "Bob" account with total transaction amount of CAD 100.03 and total number of records 2.passed
And validate "FAH" file contains "Bob" account with total transaction amount of CAD 100.96 and total number of records 3.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-7923: End Of Day: Daily File Generation Without Gateway Transactions" name="Validate that all end of the day files are generated and sent to Globestar for disputed transactions" time="94.459">
        <system-out>
            <![CDATA[Given now is 2021-06-23T00:00...............................................passed
And Country calendar is set up for random country with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a cash withdrawal of CAD 100 is made by "Bob"...........................passed
And a cash withdrawal of CAD 100 is made by "Alice".........................passed
Then a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob".....................passed
Then a CASH_ADVANCE_ATM of 100.00 is recorded for "Alice"...................passed
And a suspense transaction of CAD 100.00 is received for "Bob,Alice" with plan type C with current business date in 15 days.passed
And a journal entry of CAD 100.00 with type SUSPENSE and reason DISPUTED_CHARGE is RECORDED for "Alice".passed
And a journal entry of CAD 100.00 with type SUSPENSE and reason DISPUTED_CHARGE is RECORDED for "Bob".passed
And a card purchase of CAD 200 is made by "Alice"...........................passed
And a card purchase of CAD 200 is made by "Bob".............................passed
And roll the account business date of "Bob" to current country business date.passed
And roll the account business date of "Alice" to current country business date.passed
Then a MERCHANT_CHARGE of 200.00 is recorded for "Bob"......................passed
Then a MERCHANT_CHARGE of 200.00 is recorded for "Alice"....................passed
And a suspense transaction of CAD 200.00 is received for "Bob,Alice" with plan type R with current business date.passed
And a journal entry of CAD 200.00 with type SUSPENSE and reason DISPUTED_CHARGE is RECORDED for "Alice".passed
And a journal entry of CAD 200.00 with type SUSPENSE and reason DISPUTED_CHARGE is RECORDED for "Bob".passed
When the business date rolls over for the country...........................passed
Then the country code is registered for EoD file creation for given business date.passed
And "Alice" account is registered for "EOD" File creation for given business date.passed
And "Bob" account is registered for "EOC" File creation for given business date.passed
And validate "TRANSACTION" file contains "Alice" account with transaction type SUSPENSE and reason DISPUTED_CHARGE with transaction amount of CAD 200.00.passed
And validate "TRANSACTION" file contains "Bob" account with transaction type SUSPENSE and reason DISPUTED_CHARGE with transaction amount of CAD 200.00.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-15525: End Of Day: Daily File Generation With Gateway Transactions With Variable Transaction Codes" name="Validate that EOD files are generated and sent for transactions received from Fincap, GCNS and Globestar" time="613.203">
        <failure message="Condition with alias '[2024-06-17T23:26:10.460024] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [cdfd7b7c-f89a-41a1-a043-97e9cdd2a784]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 12.5&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=49bc9e25-1b4b-4f35-9d05-0540640137e3, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=8e79fadb-04ee-4f4d-b757-8ddde4162c76, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=25.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=3d76c7fc-5127-41cc-bf5e-bf833fa51240, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=2b3af3b4-17f3-4dd0-82b7-7afa3f632423, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash On Card, reason=CASH_ON_CARD, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=200.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=2503e1f3-e1ef-4784-99bd-d8e2067f4164, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=555f6690-9fc2-407a-b2c4-8d33fd6e6069, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Debit Adjustment, reason=MISPOSTED_PAYMENT_CORRECTION, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=200.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=63454abf-558b-4f72-a874-dbe8bf4a0ca3, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=49bc9e25-1b4b-4f35-9d05-0540640137e3, accountType=null)&#10;&#10;JournalEntry(journalEntryId=3f056835-7e8c-4100-9fc5-cbddd61e5ca7, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=0ecf86c2-a160-4ade-8505-59192e9bc0ce, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Registered Card Debit Reversal, reason=REGISTERED_CARD_DEBIT_REVERSAL, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=5.00, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=6c70c3dc-a8e1-4bbf-8a46-26528d8c5fe0, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=61dddff4-b1e8-448d-a791-f19fce4858ae, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=BALANCE_TRANSFER, description=Convenience Cheques Manual, reason=CONVENIENCE_CHEQUES_MANUAL, termId=13157933-7c5e-4191-a7d0-e68d533c1033, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=958e4c37-50ab-4417-9d5c-4897210eafba, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=2a209230-3f25-4947-aca8-d28565d5324f, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Registered Card Credit, reason=REGISTERED_CARD_CREDIT, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=55.00, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given today is 2021-06-23...................................................passed
And Country calendar is set up for random country with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a FINCAP file is received on the current business day containing:.......passed
And a GCNS file is received on the current business day containing:.........passed
And a transaction with code "0887" and Plan Type "R" is received from Globestar for CAD 5.00 with the current business date.passed
And a transaction with code "0101" and Plan Type "B" is received from Globestar for CAD 50.00 with the current business date.passed
And a transaction with code "0889" and Plan Type "R" is received from Globestar for CAD 55.00 with the current business date.passed
And a CASH_ON_CARD of 200.00 is recorded for "Bob"..........................passed
And a MISPOSTED_PAYMENT_CORRECTION of 200.00 is recorded for "Bob"..........passed
And a CASH_ADVANCE_ATM of 25.00 is recorded for "Bob".......................passed
And a CASH_ADVANCE_FEE of 2.75 is recorded for "Bob"........................passed
And a MERCHANT_CHARGE of 12.50 is recorded for "Bob"........................failed
And a REGISTERED_CARD_DEBIT_REVERSAL of 5.00 is recorded for "Bob"..........skipped
And a CONVENIENCE_CHEQUES_MANUAL of 50.00 is recorded for "Bob".............skipped
And a REGISTERED_CARD_CREDIT of 55.00 is recorded for "Bob".................skipped
And 8 transactions exist for "Bob" with the current business date and account is cycling.skipped
And roll the account business date of "Bob" to current country business date.skipped
When the business date rolls over for the country...........................skipped
And a MEMBERSHIP_FEE of 99.00 is recorded for "Bob".........................skipped
And a BILLED_FINANCE_CHARGE of 0.03 is recorded for "Bob"...................skipped
And a BILLED_FINANCE_CHARGE of 0.14 is recorded for "Bob"...................skipped
Then the country code is registered for EoD file creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
And validate "TRANSACTION" file contains "Bob" account with current balance of CAD 529.42 and total number of records 11.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:26:10.460024] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [cdfd7b7c-f89a-41a1-a043-97e9cdd2a784]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 12.5
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=49bc9e25-1b4b-4f35-9d05-0540640137e3, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=8e79fadb-04ee-4f4d-b757-8ddde4162c76, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=25.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=3d76c7fc-5127-41cc-bf5e-bf833fa51240, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=2b3af3b4-17f3-4dd0-82b7-7afa3f632423, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=CASH, description=Cash On Card, reason=CASH_ON_CARD, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=200.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=2503e1f3-e1ef-4784-99bd-d8e2067f4164, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=555f6690-9fc2-407a-b2c4-8d33fd6e6069, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Debit Adjustment, reason=MISPOSTED_PAYMENT_CORRECTION, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=200.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=63454abf-558b-4f72-a874-dbe8bf4a0ca3, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2021-06-23, effectiveDate=2021-06-23, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=65c945a5-97f6-4c53-a3e8-f807b438f07f, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=49bc9e25-1b4b-4f35-9d05-0540640137e3, accountType=null)

JournalEntry(journalEntryId=3f056835-7e8c-4100-9fc5-cbddd61e5ca7, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=0ecf86c2-a160-4ade-8505-59192e9bc0ce, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Registered Card Debit Reversal, reason=REGISTERED_CARD_DEBIT_REVERSAL, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=5.00, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=6c70c3dc-a8e1-4bbf-8a46-26528d8c5fe0, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=61dddff4-b1e8-448d-a791-f19fce4858ae, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=BALANCE_TRANSFER, description=Convenience Cheques Manual, reason=CONVENIENCE_CHEQUES_MANUAL, termId=13157933-7c5e-4191-a7d0-e68d533c1033, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=958e4c37-50ab-4417-9d5c-4897210eafba, paymentDeviceId=c6304d3b-16ce-4662-bb66-9bdb1187f0bb, relationshipId=65cd9482-a99c-41a0-81da-386c68229b6d, transactionId=2a209230-3f25-4947-aca8-d28565d5324f, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2021-06-23, effectiveDate=2021-06-23, type=ADJUSTMENT, description=Registered Card Credit, reason=REGISTERED_CARD_CREDIT, termId=142e30c6-7284-42af-8593-c53dc7da979c, billingAmount=55.00, billingCurrency=CAD, status=RECORDED, credit=true, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 12.50 is recorded for "Bob"(classpath:features/gateway/EndOfDayFileWithVariableTransactionCode.feature:24)
]]>
        </failure>
    </testcase>
    <testcase classname="MRDS-15525: End Of Day: Daily File Generation With Gateway Transactions With Variable Transaction Codes" name="Validate that EOD files are generated and sent for Backdated Creditor Insurance Payment transaction received from Fincap" time="112.403">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-02-20 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a DEBIT transaction with code "000000" is received from GCNS for "Bob" with the current business date.passed
And today is 2022-02-20.....................................................passed
And roll the account business date of "Bob" to end of cycle date............passed
And the cycle ends for "Bob"'s account......................................passed
And today is 2022-03-20.....................................................passed
And roll the account business date of "Bob" to end of cycle date............passed
And the cycle ends for "Bob"'s account......................................passed
And the account age is 30 days..............................................passed
And a CREDIT transaction with code "083105" for "Bob" is submitted from FINCAP with effective date 31 days behind current business date.passed
And a CREDITOR_INSURANCE_PAYMENT of 200.00 is recorded for "Bob"............passed
And the account age is 0 days...............................................passed
And today is 2022-03-21.....................................................passed
And the current business date is 2022-03-22.................................passed
And "Bob" account is registered for "EOD" File creation for given business date.passed
Then Generate "TRANSACTION" End Of Day Files for current country code on date 2022-03-21.passed
Then Generate "FAH" End Of Day Files for current country code on date 2022-03-21.passed
Then validate that the following files for country code get generated and sent to Globestar.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="MRDS-15525: End Of Day: Daily File Generation With Gateway Transactions With Variable Transaction Codes" name="Validate that EOD files are generated and sent for Creditor Insurance Payment Reversal transaction received from Fincap" time="100.89">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-02-20 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a DEBIT transaction with code "000000" is received from GCNS for "Bob" with the current business date.passed
And today is 2022-02-20.....................................................passed
And roll the account business date of "Bob" to end of cycle date............passed
And the cycle ends for "Bob"'s account......................................passed
And today is 2022-03-20.....................................................passed
And roll the account business date of "Bob" to end of cycle date............passed
And the cycle ends for "Bob"'s account......................................passed
And the account age is 30 days..............................................passed
And a CREDIT transaction with code "083105" is received from FINCAP for "Bob" with the current business date.passed
And a CREDITOR_INSURANCE_PAYMENT of 200.00 is recorded for "Bob"............passed
And a DEBIT transaction with code "831005" is received from FINCAP for "Bob" with the current business date.passed
And a CREDITOR_INSURANCE_PAYMENT_REVERSAL of 200.00 is recorded for "Bob"...passed
And today is 2022-03-21.....................................................passed
And the current business date is 2022-03-22.................................passed
And "Bob" account is registered for "EOD" File creation for given business date.passed
Then Generate "TRANSACTION" End Of Day Files for current country code on date 2022-03-21.passed
Then Generate "FAH" End Of Day Files for current country code on date 2022-03-21.passed
Then validate that the following files for country code get generated and sent to Globestar.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Waive Interest charge for the current cycle to the account." time="31.025">
        <system-out>
            <![CDATA[Given today is 2022-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 13.passed
And a card purchase of CAD 1000 is made on 2022-01-02.......................passed
When today is 2022-01-13....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 599.00 is made on 2022-01-15...........................passed
And a card purchase of CAD 500 is made on 2022-01-15........................passed
When today is 2022-02-13....................................................passed
And the billing period ends.................................................passed
And today is 2022-03-03.....................................................passed
And a payment of CAD 1536.32 is made on 2022-03-10..........................passed
And a card purchase of CAD 1500 is made on 2022-03-10.......................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "9".passed
Then INTEREST is waived for the Account.....................................passed
And today is 2022-03-13.....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 29.58 interest will be waived.......................................passed
And today is 2022-04-03.....................................................passed
And a payment of CAD 500 is made on 2022-04-10..............................passed
And a card purchase of CAD 500 is made on 2022-04-10........................passed
When today is 2022-04-13....................................................passed
And the billing period ends.................................................passed
And today is 2022-05-03.....................................................passed
And a payment of CAD 1541.50 is made on 2022-05-10..........................passed
When today is 2022-05-13....................................................passed
And the billing period ends.................................................passed
Then CAD 21.36 interest will be charged.....................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Apply indefinite interest waiver to account. Interest is waived until Stop Waiver is applied." time="28.252">
        <system-out>
            <![CDATA[Given today is 2022-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 13.passed
And a card purchase of CAD 100 is made on 2022-01-02........................passed
And today is 2022-01-13.....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 599.00 is made on 2022-01-15...........................passed
And a card purchase of CAD 100 is made on 2022-02-01........................passed
When today is 2022-02-13....................................................passed
And the billing period ends.................................................passed
Then CAD 3.04 interest will be charged......................................passed
And today is 2022-03-01.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "1".passed
Then INTEREST is waived for the Account.....................................passed
And today is 2022-03-13.....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 4.6 interest will be waived.........................................passed
And a card purchase of CAD 100 is made on 2022-03-20........................passed
When today is 2022-04-13....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 5.09 interest will be waived........................................passed
And today is 2022-05-01.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "0".passed
And today is 2022-05-13.....................................................passed
And the billing period ends.................................................passed
And waivers are not active on the account on 2023-05-13:....................passed
Then CAD 7.39 interest will be charged......................................passed
And CAD 0 interest will be waived...........................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Apply indefinite interest waiver to account, check waivers still active after Account goes into collections" time="33.813">
        <system-out>
            <![CDATA[Given today is 2022-01-01...................................................passed
And a new AIR_CANADA_CORE credit application is submitted with cycle day 13.passed
And a card purchase of CAD 100 is made on 2022-01-02........................passed
And today is 2022-01-13.....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 99.00 is made on 2022-01-15............................passed
And a card purchase of CAD 100 is made on 2022-02-01........................passed
When today is 2022-02-13....................................................passed
And the billing period ends.................................................passed
And today is 2022-03-01.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "1".passed
Then INTEREST is waived for the Account.....................................passed
And today is 2022-03-13.....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 5.08 interest will be waived........................................passed
And a card purchase of CAD 100 is made on 2022-03-20........................passed
When today is 2022-04-13....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 2.05 interest will be deferred......................................passed
And CAD 5.63 interest will be waived........................................passed
And a card purchase of CAD 100 is made on 2022-04-20........................passed
When today is 2022-05-13....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 1.97 interest will be deferred......................................passed
And CAD 7.90 interest will be waived........................................passed
And a card purchase of CAD 100 is made on 2022-05-20........................passed
When today is 2022-06-13....................................................passed
And the billing period ends.................................................passed
Then the account status should be "COLLECTIONS" with reason "REVOKED".......passed
Then CAD 0 interest will be charged.........................................passed
And CAD 2.05 interest will be deferred......................................passed
And CAD 10.71 interest will be waived.......................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Apply indefinite residual interest waiver to account" time="30.138">
        <system-out>
            <![CDATA[Given today is 2022-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 13.passed
And a card purchase of CAD 1000 is made on 2022-01-02.......................passed
When today is 2022-01-13....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 599.00 is made on 2022-01-15...........................passed
And a card purchase of CAD 500 is made on 2022-01-15........................passed
When today is 2022-02-13....................................................passed
And the billing period ends.................................................passed
And today is 2022-03-03.....................................................passed
And a payment of CAD 1536.32 is made on 2022-03-10..........................passed
And a card purchase of CAD 1500 is made on 2022-03-10.......................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "8".passed
Then INTEREST_RESIDUAL is waived for the Account............................passed
And today is 2022-03-13.....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
And CAD 29.58 interest will be waived.......................................passed
And today is 2022-04-03.....................................................passed
And a payment of CAD 500 is made on 2022-04-10..............................passed
And a card purchase of CAD 500 is made on 2022-04-10........................passed
When today is 2022-04-13....................................................passed
And the billing period ends.................................................passed
And today is 2022-05-03.....................................................passed
And a payment of CAD 1541.50 is made on 2022-05-10..........................passed
When today is 2022-05-13....................................................passed
And the billing period ends.................................................passed
Then CAD 0 interest will be charged.........................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Over limit Fee waiver for the current cycle:" time="14.366">
        <system-out>
            <![CDATA[Given today is 2020-11-03...................................................passed
And a new SIMPLY_CASH credit application is submitted with cycle day 3......passed
And the card has a credit limit of "5000"...................................passed
And the overlimit fee term amount is configured to CAD 30...................passed
And today is 2020-11-04.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_OVLM" = "9".passed
Then OVERLIMIT_FEE is waived for the Account................................passed
And a card purchase of CAD 7000 is made on 2020-11-05.......................passed
And the account reaches the end of the day..................................passed
Then no OVER_LIMIT_FEE is charged on 2020-11-05.............................passed
And the billing period ends.................................................passed
And a card purchase of CAD 200 is made on 2020-12-04........................passed
And the billing period ends.................................................passed
Then a OVER_LIMIT_FEE of 30.00 is charged on 2021-01-03.....................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Cash Advance Fee waiver for the current cycle:" time="11.452">
        <system-out>
            <![CDATA[Given today is 2021-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28.passed
And today is 2021-01-10.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_CSH_ADV_FEE1" = "9".passed
Then CASH_ADVANCE_FEE is waived for the Account.............................passed
And today is 2021-01-15.....................................................passed
And a cash withdrawal of CAD 150 is made on 2021-01-15......................passed
Then no CASH_ADVANCE_FEE is charged on 2021-01-15...........................passed
And the billing period ends.................................................passed
When a cash withdrawal of CAD 150 is made on 2021-02-15.....................passed
Then a CASH_ADVANCE_FEE of 4.50 is charged on 2021-02-15....................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Cash Advance Fee waiver indefinitely:" time="10.181">
        <system-out>
            <![CDATA[Given today is 2021-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28.passed
And today is 2021-01-10.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_CSH_ADV_FEE1" = "1".passed
Then CASH_ADVANCE_FEE is waived for the Account.............................passed
And a cash withdrawal of CAD 150 is made on 2021-01-26......................passed
Then no CASH_ADVANCE_FEE is charged on 2021-01-26...........................passed
And the billing period ends.................................................passed
When a cash withdrawal of CAD 150 is made on 2021-02-10.....................passed
Then no CASH_ADVANCE_FEE is charged on 2021-02-10...........................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Non Sufficient Funds Fee waiver for the current cycle:" time="20.569">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28 under current country.passed
And today is 2021-01-28.....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 is made on 2021-02-10...........................passed
And today is 2021-02-28.....................................................passed
And the billing period ends.................................................passed
And today is 2021-03-10.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_NSF_FEE_IND" = "9".passed
Then NSF_FEE is waived for the Account......................................passed
And a payment of CAD 500.00 effective on 2021-02-10 is reversed on 2021-03-10 with reason RETURNED_PAYMENT_NSF.passed
Then no DISHONOURED_PAYMENT_FEE is charged on 2021-03-10....................passed
And a payment of CAD 500.00 is made on 2021-03-15...........................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 effective on 2021-03-15 is reversed on 2021-04-10 with reason RETURNED_PAYMENT_NSF.passed
Then a DISHONOURED_PAYMENT_FEE of 25.00 is charged on 2021-04-10............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Non Sufficient Funds Fee waiver indefinitely:" time="19.149">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28 under current country.passed
And today is 2021-01-03.....................................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_NSF_FEE_IND" = "1".passed
Then NSF_FEE is waived for the Account......................................passed
And today is 2021-01-28.....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 is made on 2021-02-10...........................passed
And today is 2021-02-28.....................................................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 effective on 2021-02-10 is reversed on 2021-03-10 with reason RETURNED_PAYMENT_NSF.passed
Then no DISHONOURED_PAYMENT_FEE is charged on 2021-03-10....................passed
And a payment of CAD 500.00 is made on 2021-03-15...........................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 effective on 2021-03-15 is reversed on 2021-04-10 with reason RETURNED_PAYMENT_NSF.passed
Then no DISHONOURED_PAYMENT_FEE is charged on 2021-04-10....................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Handle membership fee waiver when fee due in the current cycle" time="48.868">
        <system-out>
            <![CDATA[Given today is 2021-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28.passed
And today is 2021-01-20.....................................................passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_FEE_CHG" = "9".passed
Then MEMBERSHIP is waived for the Account...................................passed
And today is 2021-01-28.....................................................passed
When the billing period ends................................................passed
Then no MEMBERSHIP_FEE fee is charged on 2021-01-28.........................passed
When today is 2021-02-28....................................................passed
And 11 billing periods have been closed.....................................passed
And the currently open billing period started 2021-12-29 and ends 2022-01-28.passed
And today is 2022-01-28.....................................................passed
And the billing period ends.................................................passed
Then a MEMBERSHIP_FEE fee of CAD 599.00 is charged on 2022-01-28............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Handle membership fee waiver when fee due in the next year" time="47.592">
        <system-out>
            <![CDATA[Given today is 2021-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28.passed
And today is 2021-01-28.....................................................passed
When the billing period ends................................................passed
Then a MEMBERSHIP_FEE fee of CAD 599.00 is charged on 2021-01-28............passed
And today is 2021-01-29.....................................................passed
And a payment of CAD 599.00 is made on 2021-01-29...........................passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_FEE_CHG" = "9".passed
Then MEMBERSHIP is waived for the Account...................................passed
When today is 2021-02-28....................................................passed
And 11 billing periods have been closed.....................................passed
And the currently open billing period started 2021-12-29 and ends 2022-01-28.passed
And today is 2022-01-28.....................................................passed
And the billing period ends.................................................passed
Then no MEMBERSHIP_FEE fee is charged on 2022-01-28.........................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Interest and Fee waivers" name="Handle membership fee waiving off for the life time" time="46.775">
        <system-out>
            <![CDATA[Given today is 2021-01-01...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 28.passed
And today is 2021-01-20.....................................................passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_FEE_CHG" = "1".passed
Then MEMBERSHIP is waived for the Account...................................passed
And today is 2021-01-28.....................................................passed
When the billing period ends................................................passed
Then no MEMBERSHIP_FEE fee is charged on 2021-01-28.........................passed
When today is 2021-02-28....................................................passed
And 11 billing periods have been closed.....................................passed
And the currently open billing period started 2021-12-29 and ends 2022-01-28.passed
And today is 2022-01-28.....................................................passed
And the billing period ends.................................................passed
Then no MEMBERSHIP_FEE fee is charged on 2022-01-28.........................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Journal transactions sent via the file gateway" name="Journal mixed transaction file from Fincap" time="17.948">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-04-02 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
When a FINCAP file is received with the current business date in 0 days at time 00:01:00 containing:.passed
And a CASH_ADVANCE_ATM of 100.00 is recorded................................passed
And a CASH_ADVANCE_FEE of 2.75 is recorded..................................passed
And a CREDITOR_INSURANCE_PAYMENT of 100.00 is recorded......................passed
And 3 journal entries of amount 101.00 with type PAYMENT and reason REGULAR_PAYMENT are RECORDED.passed
And 2 journal entries of amount 101.00 with type PAYMENT and reason PROCESSING_ERROR are RECORDED.passed
And 2 journal entries of 101.00 with type PAYMENT and reason REGULAR_PAYMENT posted today, effective today is reversed.passed
And 1 journal entries of 101.00 with type PAYMENT and reason REGULAR_PAYMENT posted today, effective today is NOT reversed.passed
And each payment reversal reverses exactly one payment......................passed
And the total account balance on the current business day is CAD -98.25.....passed
When a FINCAP file is received with the current business date in 0 days at time 00:02:00 containing:.passed
And 4 journal entries of amount 101.00 with type PAYMENT and reason REGULAR_PAYMENT are RECORDED.passed
And 4 journal entries of amount 101.00 with type PAYMENT and reason PROCESSING_ERROR are RECORDED.passed
And 4 journal entries of 101.00 with type PAYMENT and reason REGULAR_PAYMENT posted today, effective today is reversed.passed
And each payment reversal reverses exactly one payment......................passed
And the total account balance on the current business day is CAD 2.75.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Journal transactions sent via the file gateway" name="Journal a transaction file with multiple GCNS transactions" time="306.453">
        <failure message="Condition with alias '[2024-06-17T23:28:19.945795] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [a3a11df1-266f-460a-bdd8-e7321270b085]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-23 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted with a 15 digit card number.passed
When a GCNS file is received on the current business day containing:........passed
Then a MERCHANT_CHARGE of 5.00 is recorded..................................failed
And a REGISTERED_CARD_CREDIT of 5.00 is recorded............................skipped
And a REGISTERED_CARD_DEBIT of 5.00 is recorded.............................skipped
And a REGISTERED_CARD_REVERSAL of 5.00 is recorded..........................skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:28:19.945795] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [a3a11df1-266f-460a-bdd8-e7321270b085]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryOnReason(JournalSteps.java:767)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:94)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded(classpath:features/gateway/JournalingFileTransactions.feature:47)
]]>
        </failure>
    </testcase>
    <testcase classname="Journal transactions sent via the file gateway" name="Journal a balance transfer transaction file from GNA" time="20.001">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-04-02 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
When BalanceTransfer transactions that are received in a file from GNA......passed
Then a BALANCE_TRANSFER of 5000.88 is recorded..............................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Journal transactions sent via the file gateway" name="Journal a cash offer transaction file from STAR" time="40.335">
        <system-out>
            <![CDATA[Given a new SIMPLY_CASH credit application is submitted with a 15 digit card number.passed
When a STAR file is received on the current business day containing:........passed
Then a CASHBACK_STATEMENT_CREDIT of 12.49 is recorded.......................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Journal transactions sent via the file gateway" name="Journal transaction files from Fincap" time="12.411">
        <system-out>
            <![CDATA[Given now is 2021-06-23T00:00...............................................passed
And Country calendar is set up for random country with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
When a FINCAP file is received with the current business date in 2 days at time 00:01:00 containing:.passed
Then 4 journal entries of amount 100.00 with type PAYMENT and reason REGULAR_PAYMENT are RECORDED.passed
When a FINCAP file is received with the current business date in 2 days at time 00:02:00 containing:.passed
Then a RETURNED_PAYMENT_NSF of 100.00 is recorded for "Alice"...............passed
Then a RETURNED_PAYMENT_MISPOSTED of 100.00 is recorded for "Alice".........passed
Then a DIRECT_DEBIT_RETURNED_NSF of 100.00 is recorded for "Alice"..........passed
Then a PROCESSING_ERROR of 100.00 is recorded for "Alice"...................passed
And 2 of DISHONOURED_PAYMENT_FEE of 25.00 is recorded for "Alice"...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Setup of new journal classification and qualification. Journal transactions sent via the file gateway for newly created Journal type and reason" name="Validate the configuration based classification and qualifications as part of transaction posting in GCNS" time="307.414">
        <failure message="Condition with alias '[2024-06-17T23:28:48.665535] Assert Journal Entry, with type [MADE_UP_TYPE] and reason [MADE_UP_REASON], for Account [b1220ce1-87f4-4639-8370-2efac5fcdcb6]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - type: MADE_UP_TYPE&#10; - reason: MADE_UP_REASON&#10; - billingAmount: 99.00&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country with end of day time at 00:00.passed
And today is 2023-01-01.....................................................passed
When a new SIMPLY_CASH credit application is submitted......................passed
Then a transaction qualification of journal type "MADE_UP_TYPE" and journal reason "MADE_UP_REASON" are mapped to term PURCHASE and bucket PRINCIPAL is added.passed
And a new transaction classification is added for source GCNS with the following:.passed
When a GCNS file is received on the current business day containing:........passed
Then a journal entry of CAD 99.00 with type "MADE_UP_TYPE" and reason "MADE_UP_REASON" is RECORDED.failed
And the total balance is CAD 99.00 and balance breakdown looks like the following:.skipped
Then the transaction qualification of journal type "MADE_UP_TYPE" and journal reason "MADE_UP_REASON" is deleted.skipped
And the transaction classification for GCNS for external processing code "999991" and account type "CARD" is deleted.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:28:48.665535] Assert Journal Entry, with type [MADE_UP_TYPE] and reason [MADE_UP_REASON], for Account [b1220ce1-87f4-4639-8370-2efac5fcdcb6]' didn't complete within 5 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - type: MADE_UP_TYPE
 - reason: MADE_UP_REASON
 - billingAmount: 99.00
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyScenarioStateJournalOfTypeAndReasonForUser(JournalSteps.java:604)
	at ✽.a journal entry of CAD 99.00 with type "MADE_UP_TYPE" and reason "MADE_UP_REASON" is RECORDED(classpath:features/gateway/JournalingFileTransactionsNewArch.feature:16)
]]>
        </failure>
    </testcase>
    <testcase classname="Non Mars Data is correctly populated on EOD file for transactions coming through gateways, triggered by end of day or end" name="TRANSACTION FILE: Confirm that descriptionLine1 is present when an adjustment is posted - MARS-DESC-1" time="608.806">
        <failure message="Condition with alias '[2024-06-17T23:28:51.075702] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [6b5ee896-2d3c-457c-ab36-a3ca2de89066]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 10.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2023-02-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And roll the account business date of "Alice" to current country business date.passed
When a VARIABLE_TRANSACTION_GCNS transaction is received from GCNS with the current business date 0 days ago with the following records:.passed
Then a MERCHANT_CHARGE of 10.00 is recorded for "Alice".....................failed
And a REGISTERED_CARD_CREDIT of 5.00 is recorded for "Alice"................skipped
And all transactions have descriptions for "Alice"..........................skipped
When the business date rolls over for the country...........................skipped
And "Alice" account is registered for "EOD" File creation for given business date.skipped
Then the country code is registered for EoD file creation for given business date.skipped
Then "TRANSACTION" file contains records for "Alice" with the following records:.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:28:51.075702] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [6b5ee896-2d3c-457c-ab36-a3ca2de89066]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 10.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 10.00 is recorded for "Alice"(classpath:features/gateway/NonMarsDataEndOfDay.feature:13)
]]>
        </failure>
    </testcase>
    <testcase classname="Non Mars Data is correctly populated on EOD file for transactions coming through gateways, triggered by end of day or end" name="Confirm that non-mars data coming from GCNS, Globestar and FINCAP is correctly populated in FAH &amp; Transaction EoD files" time="613.044">
        <failure message="Condition with alias '[2024-06-17T23:29:01.756546] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [36c0f852-fb82-46aa-b989-564e2760e323]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=5e908313-b147-4672-b628-103f8321d409, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=1f50cc6d-ef0c-4c54-95b9-555bc9ce1804, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2023-01-01, effectiveDate=2023-01-01, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=fc599ca6-0f73-43fa-ba48-27e30a7bbde4, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2023-01-01, effectiveDate=2023-01-01, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=5e908313-b147-4672-b628-103f8321d409, accountType=null)&#10;&#10;JournalEntry(journalEntryId=a7b026ad-a09c-427e-9d0f-4e16d6d6dc81, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=73160f1c-62ff-4955-8155-be5ac7881861, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-01-01, effectiveDate=2023-01-01, type=ADJUSTMENT, description=REVERSAL OF TEMPORARY CREDIT, reason=TEMPORARY_DEBIT, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And the currently open billing period for "Bob" ends on the current business day of country.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
When a MULTIPLE_PURCHASE_EOD transaction is received from GCNS with the current business date 0 days ago with the following records:.passed
And a SINGLE_CASH_EOD transaction is received from FINCAP with the current business date 0 days ago with the following records:.passed
And a TEMPORARY_DEBIT transaction is received via the g* gateway 0 days ago with the following records:.passed
Then a MERCHANT_CHARGE of 5.00 is recorded for "Bob"........................failed
And a MERCHANT_CHARGE of 5.00 is recorded for "Alice".......................skipped
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"......................skipped
And a CASH_ADVANCE_FEE of 2.75 is recorded for "Bob"........................skipped
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Alice"....................skipped
And a CASH_ADVANCE_FEE of 2.75 is recorded for "Alice"......................skipped
And a TEMPORARY_DEBIT of 50.00 is recorded for "Bob"........................skipped
And roll the account business date of "Alice" to current country business date.skipped
And roll the account business date of "Bob" to current country business date.skipped
When the business date rolls over for the country...........................skipped
And the country code is registered for EoD file creation for given business date.skipped
And "Alice" account is registered for "EOD" File creation for given business date.skipped
And "Bob" account is registered for "EOC" File creation for given business date.skipped
Then "TRANSACTION" file contains records for "Bob" with the following records:.skipped
And "TRANSACTION" file contains records for "Alice" with the following records:.skipped
And "FAH" file contains records for "Bob" with the following records:.......skipped
And "FAH" file contains records for "Alice" with the following records:.....skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:29:01.756546] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [36c0f852-fb82-46aa-b989-564e2760e323]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=5e908313-b147-4672-b628-103f8321d409, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=1f50cc6d-ef0c-4c54-95b9-555bc9ce1804, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2023-01-01, effectiveDate=2023-01-01, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=fc599ca6-0f73-43fa-ba48-27e30a7bbde4, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2023-01-01, effectiveDate=2023-01-01, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=2.75, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=5e908313-b147-4672-b628-103f8321d409, accountType=null)

JournalEntry(journalEntryId=a7b026ad-a09c-427e-9d0f-4e16d6d6dc81, paymentDeviceId=5025f72a-7741-4295-b6da-622fd140b06f, relationshipId=3e170af9-1d50-433c-a797-efd5be3dda14, transactionId=73160f1c-62ff-4955-8155-be5ac7881861, sourceReferenceId=null, sourceSystem=GLOBESTAR, postingDate=2023-01-01, effectiveDate=2023-01-01, type=ADJUSTMENT, description=REVERSAL OF TEMPORARY CREDIT, reason=TEMPORARY_DEBIT, termId=fdfe1780-63e3-4ff1-a541-a9f0d928893a, billingAmount=50.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded for "Bob"(classpath:features/gateway/NonMarsDataEndOfDay.feature:41)
]]>
        </failure>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Invalidate a payment device due to non-received card (no impact on relationship)" time="3.269">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been invalidated for reason "non-received".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Invalidate a payment device due to stolen card and event comes with another update account status block code" time="3.447">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
When a block code change is submitted with the following values:............passed
Then the account status should be "CANCELLED" with reason "CUSTOMER_REQUEST".passed
And account holder payment device has been invalidated for reason "stolen"..passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Invalidate a payment device due to lost card but do not update account status despite block code 1" time="4.164">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given a block code change is submitted with the following values:...........passed
And the account status should be "CANCELLED" with reason "CUSTOMER_REQUEST".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
When a block code change is submitted with the following values:............passed
Then the account status should be "CANCELLED" with reason "CUSTOMER_REQUEST".passed
And account holder payment device has been invalidated for reason "lost"....passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Transfer a payment device (no impact on relationship)" time="3.256">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been transferred for reason "card-replacement".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Invalidate a payment device due to customer request (no impact on relationship)" time="3.117">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
When a block code change is submitted with the following values:............passed
And account holder payment device has been invalidated for reason "cm-request".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Invalidating holder payment device does not cancel user relationship" time="5.575">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given a AIR_CANADA_PREMIUM user is added to the account.....................passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
And USER relationship status is ACTIVE with no reason change................passed
And a block code change for HOLDER is submitted with the following values:..passed
And account holder payment device has been invalidated for reason "cm-request".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
And USER relationship status is ACTIVE with no reason change................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Reinstating user's payment device" time="5.955">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given a AIR_CANADA_PREMIUM user is added to the account.....................passed
And USER relationship status is ACTIVE with no reason change................passed
And a block code change for USER is submitted with the following values:....passed
And account user payment device has been invalidated for reason "cm-request".passed
And USER relationship status gets updated to CANCELLED with reason "cm-request".passed
When a block code change for USER is submitted to reinstate the payment device.passed
Then account user payment device has been reinstated for reason "reinstate-cm-request".passed
And USER relationship status gets updated to ACTIVE with reason "reinstate-cm-request".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Reinstating holder's payment device" time="4.28">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
And a block code change is submitted with the following values:.............passed
And account holder payment device has been invalidated for reason "cm-request".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
When a block code change for HOLDER is submitted to reinstate the payment device.passed
Then account holder payment device has been reinstated for reason "reinstate-cm-request".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Payment device set to invalidated reason when a card level block code change from one invalidated reason to another." time="4.1">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been invalidated for reason "service-complaint".passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been invalidated for reason "service-complaint".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Payment device set to invalidated reason when a card level block code change from one invalidated reason to another. 2" time="4.594">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been invalidated for reason "inactive".passed
When a block code change is submitted with the following values:............passed
Then account holder payment device has been invalidated for reason "returned-plastic-bad-address".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Payment device set to invalidated reason when a card level block code request received." time="3.283">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
And a block code change is submitted with the following values:.............passed
Then account holder payment device has been invalidated for reason "returned-plastic-bad-address".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Payment device status and relationship change when block code event is received" name="Payment device set to invalidated reason when a card level block code request received. 2" time="4.761">
        <system-out>
            <![CDATA[Given today is 2022-01-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted................passed
Given HOLDER relationship status is ACTIVE with no reason change............passed
And a block code change is submitted with the following values:.............passed
Then account holder payment device has been invalidated for reason "charge-off".passed
And HOLDER relationship status is ACTIVE with no reason change..............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Process Addenda For Transactions" name="Process Airline and Wallet Addenda for GCNS Gateway" time="608.711">
        <failure message="Condition with alias '[2024-06-17T23:29:15.121547] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [9ead5bec-73f7-448d-9977-ae905fb04262]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
And a Addenda transaction is received from GCNS for "Bob" with the current business date in 0 days.passed
And a MERCHANT_CHARGE of 5.00 is recorded for "Bob".........................failed
When the current business date is 2023-01-02................................skipped
And Generate "TRANSACTION" End Of Day Files for current country code on date 2023-01-01.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:29:15.121547] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [9ead5bec-73f7-448d-9977-ae905fb04262]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded for "Bob"(classpath:features/gateway/ProcessAddenda.feature:8)
]]>
        </failure>
    </testcase>
    <testcase classname="Mark account pending purge once mars receive clearMars Event from globestar" name="Account gets marked as pending purge once globestar reports data mismatch" time="65.359">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-28 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle in 30 days of the country.passed
And a new SIMPLY_CASH credit application is submitted for "Alice" with end of cycle in 30 days of the country.passed
And roll the account business date of "Alice" to current country business date.passed
And roll the account business date of "Bob" to current country business date.passed
When globestar account data mismatch event is received for "Bob" account....passed
Then the account status gets updated to "PENDING_PURGE" with reason "DATA_MISMATCH" for "Bob" account.passed
Then relationship status gets updated to PENDING_PURGE for "Bob" account....passed
Then payment device status gets updated to PENDING_PURGE with reason "data-mismatch" for "Bob" account.passed
When the business date rolls over for the country...........................passed
Then country code gets registered for EoD file creation with only active accounts.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Mark account pending purge once mars receive clearMars Event from globestar" name="Block Code Change triggered on tagged PENDING PURGE Account" time="64.001">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-04-02 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
When globestar account data mismatch event is received for "Bob" account....passed
Then the account status gets updated to "PENDING_PURGE" with reason "DATA_MISMATCH" for "Bob" account.passed
When a block code change is submitted with block code 1 C with block code 1 date 2023-04-02 block code 2 D with previous block code 1 ' ' and previous block code 2 ' ' and card level block code ' ' at start of day.passed
Then the account status should remain in "PENDING_PURGE" with reason "DATA_MISMATCH".passed
When the business date rolls over for the country...........................passed
Then record does not appear in EoD files....................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Mark account pending purge once mars receive clearMars Event from globestar" name="CustomerRelocated event triggered after account was tagged as PENDING_PURGE." time="3.513">
        <system-out>
            <![CDATA[Given a new AIR_CANADA_PREMIUM credit application is submitted by a customer in "SK" on 2023-01-01.passed
When the current business date for given country is 2023-01-04..............passed
And issue was encountered and account was tagged as PENDING_PURGE...........passed
And a globestar event was received to relocate customer to "AB".............passed
Then verify that holder relocation terms are not added and old terms effective from "2023-01-01" still in place.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="After Pending Purge Scenarios : Gateways" name="Received transactions from GCNS File Gateway after the account was tagged as PENDING_PURGE." time="53.608">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
When globestar account data mismatch event is received for "Bob" account....passed
And a GCNS file is received on the current business day containing:.........passed
Then no MERCHANT_CHARGE is posted on account................................passed
And no REGISTERED_CARD_CREDIT is posted on account..........................passed
And no REGISTERED_CARD_DEBIT is posted on account...........................passed
When the business date rolls over for the country...........................passed
Then record does not appear in EoD files....................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="After Pending Purge Scenarios : Gateways" name="Received transactions from Globestar Gateway after the account was tagged as PENDING_PURGE." time="60.795">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2023-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle in 10 days of the country.passed
And a new AIR_CANADA_CORE credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And roll the account business date of "Alice" to current country business date.passed
And roll the account business date of "Bob" to current country business date.passed
When globestar account data mismatch event is received for "Bob" account....passed
Then the account status gets updated to "PENDING_PURGE" with reason "DATA_MISMATCH" for "Bob" account.passed
Then relationship status gets updated to PENDING_PURGE for "Bob" account....passed
When a principal credit adjustment transaction is received for CAD 3.00 with plan type C for "Bob" account.passed
Then no PRINCIPAL_CREDIT_ADJUSTMENT is posted for "Bob" account.............passed
When the business date rolls over for the country...........................passed
Then country code gets registered for EoD file creation with only active accounts.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Process BIP GLARNS Transactions from gateway file" name="Process GLARNS transactions file" time="14.264">
        <system-out>
            <![CDATA[Given today is 2023-11-01...................................................passed
And Country calendar is set up for USA......................................passed
When a new BIP account is received for "Bob" from company "XYZ LLC" from state "ARIZONA" postal code "85254" and offer code "DFW030".passed
Then a CARS credit application is created with the following details........passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
Given a Glarns Transaction file is received from GLARNS gateway with below transactions:.passed
And a Glarns Report file is received from GLARNS gateway with below balance details:.passed
Then a journal entry of USD 1200.00 with type "PURCHASE" and reason "UNMATCHED_DECLINED_BANK_TRANSACTION" is RECORDED.passed
Then a journal entry of USD 900.00 with type "PAYMENT" and reason "REGULAR_PAYMENT" is RECORDED.passed
Then a journal entry of USD 1350.00 with type "PAYMENT" and reason "REGULAR_PAYMENT" is RECORDED.passed
Then a journal entry of USD 500.00 with type "PAYMENT" and reason "DIRECT_DEBIT" is RECORDED.passed
Then a journal entry of USD 1100.00 with type "PAYMENT" and reason "CUSTOMER_SERVICE_PAYMENT" is RECORDED.passed
Then a journal entry of USD 1400.00 with type "PAYMENT" and reason "CORPORATE_PAYMENT" is RECORDED.passed
Then a journal entry of USD 600.00 with type "PAYMENT" and reason "CORPORATE_PAYMENT" is RECORDED.passed
Then a journal entry of USD 725.00 with type "PAYMENT" and reason "CORPORATE_PAYMENT" is RECORDED.passed
Then a journal entry of USD 1545.00 with type "PAYMENT" and reason "CORPORATE_ONLINE_PAYMENT" is RECORDED.passed
Then a journal entry of USD 450.00 with type "PURCHASE" and reason "UNMATCHED_DECLINED_BANK_TRANSACTION" is RECORDED.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Handle CARS new account received process through Corporate Gateway" name="Validate CARS new account received through Corporate Gateway is processed successfully" time="3.093">
        <system-out>
            <![CDATA[Given today is 2023-10-15...................................................passed
And Country calendar is set up for USA......................................passed
When a new BIP account is received for "Bob" from company "XYZ LLC" from state "ARIZONA" postal code "85254".passed
Then a CARS credit application is created with the following details........passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
And the account overlimit is established....................................passed
And the HOLDER relationship status is ACTIVE for the account................passed
And an empty journal exists for the account.................................passed
And a billing period is open for the account................................passed
And the payment obligation structure has been set for account...............passed
And the account age is defined..............................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Handle CARS new account received process through Corporate Gateway" name="Validate CARS new account with Offer Code is received through Corporate Gateway and new late fee terms are added to the account" time="2.89">
        <system-out>
            <![CDATA[Given today is 2023-10-15...................................................passed
And Country calendar is set up for USA......................................passed
When a new BIP account is received for "Bob" from company "XYZ LLC" from state "ARIZONA" postal code "85254" and offer code "DFW030".passed
Then a CARS credit application is created with 2 late fee terms; one of them is offered delinquency exception terms and the other is product level late fee terms.passed
Then the account status should be "ACTIVE" with reason "ACTIVE".............passed
And the account overlimit is established....................................passed
And the HOLDER relationship status is ACTIVE for the account................passed
And an empty journal exists for the account.................................passed
And a billing period is open for the account................................passed
And the payment obligation structure has been set for account...............passed
And the account age is defined..............................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Record BIP Transactions from gateway file" name="CARS gateway processes concatenated inbound transaction and report files and journals transactions" time="16.116">
        <system-out>
            <![CDATA[Given today is 2023-10-10...................................................passed
And Country calendar is set up for USA......................................passed
When a new BIP credit application is submitted for "Bob"....................passed
And a SmallConcat transaction is received from CARS sent 0 days ago from date 2023-10-10 with the following records:.passed
Then a journal entry of USD 2000 with type PURCHASE and reason MERCHANT_CHARGE is posted on current business date.passed
And a journal entry of USD 1798 with type FEE and reason BIP_PROCESSING_FEE is posted on current business date.passed
And a journal entry of USD 1500 with type PURCHASE and reason MERCHANT_CHARGE is posted on current business date.passed
And a journal entry of USD 1100 with type FEE and reason BIP_PROCESSING_FEE is posted on current business date.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="GlobeStar message reprocessing post migration" name="Failed GlobeStar Kafka Transaction messages are successfully reprocessed for a migrated account" time="50.233">
        <system-out>
            <![CDATA[Given migration date is today and the account has 3 billing periods.........passed
And holder with applicationDate auto and feeDate auto.......................passed
And user with applicationDate auto, feeDate auto and pct 6AG................passed
And account is migrated.....................................................passed
And the migrated billing history is.........................................passed
And the migrated balance history is.........................................passed
And the migrated delinquency history is.....................................passed
And the migrated transaction history is.....................................passed
And a PURCHASE of CAD 100.00 with reason MERCHANT_CHARGE is received for the migrated account.passed
And a PURCHASE of CAD 101.00 with reason MERCHANT_CHARGE is received for the migrated account.passed
And a PURCHASE of CAD 102.00 with reason MERCHANT_CHARGE is received for the migrated account.passed
And a PAYMENT of CAD 80.00 with reason REGULAR_PAYMENT is received for the migrated account.passed
And all EndOfFile events are sent...........................................passed
And verify the accountId exists in the migration gateway....................passed
And verify the transactions for the migrated account........................passed
And the total customer balance for today is CAD 400.30......................passed
And the FAILED_NON_RETRY GlobeStar transactions is reprocessed today........passed
Then a journal entry of CAD 100.00 with type PURCHASE and reason MERCHANT_CHARGE is posted today, effective today with description Retail Sale.passed
Then a journal entry of CAD 101.00 with type PURCHASE and reason MERCHANT_CHARGE is posted today, effective today with description Retail Sale.passed
Then a journal entry of CAD 102.00 with type PURCHASE and reason MERCHANT_CHARGE is posted today, effective today with description Retail Sale.passed
Then a journal entry of CAD 80.00 with type PAYMENT and reason REGULAR_PAYMENT is RECORDED.passed
And the total customer balance for today is CAD 623.30......................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="GlobeStar message reprocessing post migration" name="Failed GlobeStar Kafka Non-Financial messages are successfully reprocessed for a migrated account" time="38.761">
        <system-out>
            <![CDATA[Given migration date is today and the account has 3 billing periods.........passed
And holder with applicationDate auto and feeDate auto.......................passed
And user with applicationDate auto, feeDate auto and pct 6AG................passed
And account is migrated.....................................................passed
And the migrated billing history is.........................................passed
And the migrated balance history is.........................................passed
And the migrated delinquency history is.....................................passed
And the migrated transaction history is.....................................passed
And a replacement card issued event is sent for a migrated account from Globestar for reason "lost".passed
And the account BlockCode change is.........................................passed
And all EndOfFile events are sent...........................................passed
And verify the accountId exists in the migration gateway....................passed
And migrated account holder payment device has been invalidated for reason L with effective date that is 5 days into billing period 1.passed
When the FAILED_NON_RETRY GlobeStar non-financial messages are reprocessed..passed
Then migrated account holder payment device has been reinstated today.......passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Create accounts on MARS for backbook accounts on Globestar" name="Validate that certain end of day file fields are populated based on Migration snapshot data" time="62.413">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-02-25 with end of day time at 00:00.passed
And migration date is 2022-02-25............................................passed
And holder with applicationDate 2021-12-02 and feeDate 2022-12-02...........passed
And includes chargeOff......................................................passed
And account is migrated.....................................................passed
And all EndOfFile events are sent...........................................passed
Then verify the accountId exists in the migration gateway...................passed
And the account status is CHARGE_OFF with reason BANKRUPT_LEGAL effective on 2022-02-25.passed
Then the accounts calendar current business date is 2022-02-25..............passed
When business date for the country is eventually successfully rolled over...passed
And the accounts calendar current business date is 2022-02-26...............passed
And validate that the following files get generated for business date 2022-02-25 and sent to Globestar.passed
Then "ACCOUNT_BALANCE" file contains records for "Migrated" with the expected values for field group "RecentTransactions".passed
And "ACCOUNT_BALANCE" file contains records for "Migrated" with the expected values for field group "PreviousCycleDueCode".passed
And "ACCOUNT_BALANCE" file contains records for "Migrated" with the expected values for field group "DelinquencyHistory".passed
And "ACCOUNT_BALANCE" file contains records for "Migrated" with the expected values for field group "PaymentHistory".passed
And "SUB_BALANCE" file contains records for "Migrated" with the expected values for field group "PaymentHistory".passed
And "SUB_BALANCE" file contains records for "Migrated" with the expected values for field group "ChargeOffBalance".passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Validate that all end of day files are generated for a migrated account as well as non-migration account with valid business data" name="Validate that all end of day files are generated for a migrated account alone" time="68.515">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2022-02-25 with end of day time at 00:00.passed
Given migration date is 2022-02-25..........................................passed
And holder with applicationDate 2021-12-02 and feeDate 2022-12-02...........passed
And account is migrated.....................................................passed
And a new migration is saved to the Migration Database with status IN_PROGRESS.passed
And the migrated delinquency history is.....................................passed
And the migrated billing history is.........................................passed
And the migrated balance history is.........................................passed
Given the migrated transaction history is...................................passed
And all EndOfFile events are sent...........................................passed
And verify the accountId exists in the migration gateway....................passed
And the accounts calendar current business date is 2022-02-25...............passed
And today is 2022-02-25.....................................................passed
When business date for the country is eventually successfully rolled over...passed
Then the accounts calendar current business date is 2022-02-26..............passed
And validate that the following files get generated for business date 2022-02-25 and sent to Globestar.passed
And validate "ACCOUNT_BALANCE" file on 2022-02-25 contains current balance of CAD 661.23 and total number of records 1.passed
And validate "ACCOUNT_BALANCE" file on 2022-02-25 contains total dispute balance of CAD 20.00 and cash dispute balance of CAD 0 and total number of records 1.passed
And validate "SUB_BALANCE" file on 2022-02-25 contains current balance of CAD 661.23 and total number of records 2.passed
And validate "TRANSACTION" file on 2022-02-25 contains current balance of CAD 0 and total number of records 0.passed
And validate "FAH" file on 2022-02-25 contains current balance of CAD 0 and total number of records 0.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Validate that all end of day files are generated for a migrated account as well as non-migration account with valid business data" name="Validate that all end of day files are generated for a migrated account along with multiple non-migrated accounts on same day with valid business data" time="636.532">
        <failure message="Condition with alias '[2024-06-17T23:31:52.230927] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [ce9a2b0f-721e-4347-83f5-c60b6ee3c1e7]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:&#10; - reason: MERCHANT_CHARGE&#10; - billingAmount: 5.0&#10; - status: RECORDED&#10; but Found 0 matching Journal Entries [] &#10;All JournalEntries:&#10;JournalEntry(journalEntryId=91f2a2d7-13fe-4f0f-8605-3159b4274f4a, paymentDeviceId=28533e32-bbfa-4e51-b1a6-a2f1b9716929, relationshipId=3909270b-a0ad-4a39-be7e-7a6d95809924, transactionId=993260b8-cfaf-49ad-927d-4dd699639b39, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2022-02-25, effectiveDate=2022-02-25, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)&#10;&#10;JournalEntry(journalEntryId=0eb6fe1c-51d6-4c88-9e84-7a24ad90966c, paymentDeviceId=28533e32-bbfa-4e51-b1a6-a2f1b9716929, relationshipId=3909270b-a0ad-4a39-be7e-7a6d95809924, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2022-02-25, effectiveDate=2022-02-25, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=91f2a2d7-13fe-4f0f-8605-3159b4274f4a, accountType=null)." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2022-02-25 with end of day time at 00:00.passed
Given migration date is 2022-02-25..........................................passed
And holder with applicationDate 2021-12-02 and feeDate 2022-12-02...........passed
And account is migrated.....................................................passed
And a new migration is saved to the Migration Database with status IN_PROGRESS.passed
And the migrated delinquency history is.....................................passed
And the migrated billing history is.........................................passed
And the migrated balance history is.........................................passed
Given the migrated transaction history is...................................passed
And all EndOfFile events are sent...........................................passed
And verify the accountId exists in the migration gateway....................passed
And the accounts calendar current business date is 2022-02-25...............passed
And today is 2022-02-25.....................................................passed
And a new AIR_CANADA_CORE credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
And a new AIR_CANADA_CORE credit application is submitted for "Alice" with end of cycle in 10 days of the country.passed
And a SINGLE_CASH transaction is received from FINCAP for "Bob,Alice" with the current business date.passed
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Bob"......................passed
And a CASH_ADVANCE_ATM of 100.00 is recorded for "Alice"....................passed
And a SinglePurchaseMerchantCharge transaction is received from GCNS for "Bob,Alice" with the current business date.passed
And a MERCHANT_CHARGE of 5.00 is recorded for "Bob".........................failed
And a MERCHANT_CHARGE of 5.00 is recorded for "Alice".......................skipped
And 3 transactions exist for "Bob" with the current business date and account is cycling.skipped
And 3 transactions exist for "Alice" with the current business date and account is cycling.skipped
And roll the account business date of "Alice" to current country business date.skipped
And roll the account business date of "Bob" to current country business date.skipped
Then business date for the country is eventually successfully rolled over...skipped
And validate that the following files get generated for business date 2022-02-25 and sent to Globestar.skipped
And validate "ACCOUNT_BALANCE" file contains "Bob" account with current balance of CAD 228.00 and total number of records 1.skipped
And "ACCOUNT_BALANCE" file contains records for "Bob" with the following records:.skipped
And validate "ACCOUNT_BALANCE" file contains "Alice" account with current balance of CAD 108.00 and total number of records 1.skipped
And "ACCOUNT_BALANCE" file contains records for "Alice" with the following records:.skipped
And validate "ACCOUNT_BALANCE" file contains "Migrated" account with current balance of CAD 661.23 and total number of records 1.skipped
And "ACCOUNT_BALANCE" file contains records for "Migrated" with the following records:.skipped
And validate "SUB_BALANCE" file contains "Bob" account with current balance of CAD 228.00 and total number of records 2.skipped
And "SUB_BALANCE" file contains records for "Bob" with the following records:.skipped
And validate "SUB_BALANCE" file contains "Alice" account with current balance of CAD 108.00 and total number of records 2.skipped
And "SUB_BALANCE" file contains records for "Alice" with the following records:.skipped
And validate "SUB_BALANCE" file contains "Migrated" account with current balance of CAD 661.23 and total number of records 2.skipped
And "SUB_BALANCE" file contains records for "Migrated" with the following records:.skipped
And "TRANSACTION" file contains records for "Bob" with total transaction amount of CAD 228.00 and total number of records 4.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped
And "TRANSACTION" file contains records for "Alice" with total transaction amount of CAD 108.00 and total number of records 3.skipped
And "TRANSACTION" file contains records for "Alice" with the following records:.skipped
And validate "FAH" file contains "Bob" account with total transaction amount of CAD 228.18 and total number of records 6.skipped
And "FAH" file contains records for "Bob" with the following records:.......skipped
And validate "FAH" file contains "Alice" account with total transaction amount of CAD 108.00 and total number of records 3.skipped
And "FAH" file contains records for "Alice" with the following records:.....skipped
And validate "FAH" file contains "Migrated" account with total transaction amount of CAD 0 and total number of records 0.skipped
And "TRANSACTION" file contains records for "Migrated" with total transaction amount of CAD 0 and total number of records 0.skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:31:52.230927] Assert Journal Entry, with type [null] and reason [MERCHANT_CHARGE], for Account [ce9a2b0f-721e-4347-83f5-c60b6ee3c1e7]' didn't complete within 10 minutes because lambda expression in com.aexp.mars.regression.test.assertion.JournalAsserter: expected to find exactly 1 JournalEntry with following properties:
 - reason: MERCHANT_CHARGE
 - billingAmount: 5.0
 - status: RECORDED
 but Found 0 matching Journal Entries [] 
All JournalEntries:
JournalEntry(journalEntryId=91f2a2d7-13fe-4f0f-8605-3159b4274f4a, paymentDeviceId=28533e32-bbfa-4e51-b1a6-a2f1b9716929, relationshipId=3909270b-a0ad-4a39-be7e-7a6d95809924, transactionId=993260b8-cfaf-49ad-927d-4dd699639b39, sourceReferenceId=null, sourceSystem=FINCAP, postingDate=2022-02-25, effectiveDate=2022-02-25, type=CASH, description=Cash Advance ATM, reason=CASH_ADVANCE_ATM, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=100.0000000000, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=null, accountType=null)

JournalEntry(journalEntryId=0eb6fe1c-51d6-4c88-9e84-7a24ad90966c, paymentDeviceId=28533e32-bbfa-4e51-b1a6-a2f1b9716929, relationshipId=3909270b-a0ad-4a39-be7e-7a6d95809924, transactionId=null, sourceReferenceId=null, sourceSystem=null, postingDate=2022-02-25, effectiveDate=2022-02-25, type=FEE, description=Funds Advance Fee, reason=CASH_ADVANCE_FEE, termId=c86ec10f-fd07-4bd6-92e1-6f776946bcf4, billingAmount=3.00, billingCurrency=CAD, status=RECORDED, credit=false, rejectionDate=null, rejectionReason=null, purgedDate=null, reversedOn=null, reversedById=null, journalEntryIdToReverse=null, primaryEntryId=91f2a2d7-13fe-4f0f-8605-3159b4274f4a, accountType=null).
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AbstractHamcrestCondition.await(AbstractHamcrestCondition.java:86)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:601)
	at com.aexp.mars.regression.helper.PollingHelper.waitFor(PollingHelper.java:90)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertJournalEntriesExist(JournalAsserter.java:59)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyJournalEntryByUser(JournalSteps.java:882)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyDebit(JournalSteps.java:133)
	at ✽.a MERCHANT_CHARGE of 5.00 is recorded for "Bob"(classpath:features/gateway/migration/MigrationWithEndOfDayProcess.feature:79)
]]>
        </failure>
    </testcase>
    <testcase classname="Account cancellation after enrolling into hardship" name="Continue to request minimum payment even if the account is cancelled after enrolling into hardship" time="15.428">
        <system-out>
            <![CDATA[Given today is 2021-05-03...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 01.passed
And a card purchase of CAD 994.00 is made on 2021-05-05.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-05...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-05-05.............passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
When the account status is amended to "Cancelled" with reason "CUSTOMER_REQUEST" on date 2021-05-21.passed
Then the account status should be "Cancelled" with reason "CUSTOMER_REQUEST".passed
And the billing period ends.................................................passed
And a minimum payment obligation of CAD 100.00 was determined...............passed
And a payment of CAD 100.00 is made on 2021-06-05, that is effective from 2021-06-05.passed
And the billing period ends.................................................passed
And a minimum payment obligation of CAD 100.00 was determined...............passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Early Exit: Validate card member early exit process from financial relief plan based on the trigger event from Globestar" time="67.095">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 395.00 is made on 2021-04-03.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-03...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-04-03.............passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And 8 transactions exist for "Sam" on 2021-05-15............................passed
When the current business date for given country is 2021-05-16..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-05-15.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-06-15 with code "EARLY_EXIT".passed
And the account has the following terms:....................................passed
When the current business date for given country is 2021-06-16..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-06-15.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And a card purchase of CAD 200.00 is made on 2021-06-16.....................passed
And a cash withdrawal of CAD 100.00 is made on 2021-06-17...................passed
And no CASH_ADVANCE_FEE is charged on 2021-06-17............................passed
And a payment of CAD 100.00 is made on 2021-06-20...........................passed
And a payment of CAD 100.00 is reversed with reason RETURNED_PAYMENT_NSF on 2021-06-22.passed
And no DISHONOURED_PAYMENT_FEE is charged on 2021-06-22.....................passed
When the billing period ends................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 1500.00...............................passed
And CAD 0 interest will be deferred.........................................passed
And CAD 0 interest will be charged..........................................passed
And CAD 3.86 interest will be waived........................................passed
When the current business date for given country is 2021-07-03..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-07-02.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And a cash withdrawal of CAD 200.00 is made on 2021-07-17...................passed
Then a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-07-17............passed
And a payment of CAD 200.00 is made on 2021-07-20...........................passed
And a payment of CAD 200.00 is reversed with reason RETURNED_PAYMENT_NSF on 2021-07-22.passed
Then a DISHONOURED_PAYMENT_FEE fee of CAD 25.00 is charged on 2021-07-22....passed
And a card purchase of CAD 300.00 is made on 2021-07-23.....................passed
And a cash withdrawal of CAD 400.00 is made on 2021-07-24...................passed
Then a CASH_ADVANCE_FEE fee of CAD 12.00 is charged on 2021-07-24...........passed
When the billing period ends................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 2481.20...............................passed
And CAD 38.20 interest will be charged......................................passed
And CAD 0 interest will be waived...........................................passed
And CAD 8.44 interest will be deferred......................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Accidental: Validate card member accidental exit process from financial relief plan based on trigger event from Globestar" time="44.144">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 395.00 is made on 2021-04-03.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-03...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-04-03.............passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And 8 transactions exist for "Sam" on 2021-05-15............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-06-15 with code "ACCIDENTAL".passed
And 8 transactions exist for "Sam" on 2021-06-15............................passed
And the account has the following terms:....................................passed
When the current business date for given country is 2021-06-16..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-06-15.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And a card purchase of CAD 200.00 is made on 2021-06-17.....................passed
And a cash withdrawal of CAD 100.00 is made on 2021-06-18...................passed
Then a CASH_ADVANCE_FEE fee of CAD 3.00 is charged on 2021-06-18............passed
And a payment of CAD 200.00 is made on 2021-06-20...........................passed
And a payment of CAD 200.00 is reversed with reason RETURNED_PAYMENT_NSF on 2021-06-22.passed
Then a DISHONOURED_PAYMENT_FEE fee of CAD 25.00 is charged on 2021-06-22....passed
When the billing period ends................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 1528.00...............................passed
And CAD 20.61 interest will be deferred.....................................passed
And CAD 0 interest will be charged..........................................passed
And CAD 0 interest will be waived...........................................passed
When the billing period ends................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 1587.53...............................passed
And CAD 0 interest will be deferred.........................................passed
And CAD 38.92 interest will be charged......................................passed
And CAD 0 interest will be waived...........................................passed
When the current business date for given country is 2021-07-03..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-07-02.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Validate holder card membership fee is not charged on the next billing cycle date when he exists from IFRP program with reason early-exit" time="14.663">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 994.00 is made on 2021-04-03.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-03...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-04-03.............passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-04-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And 6 transactions exist for "Sam" on 2021-04-15............................passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-04-20 with code "EARLY_EXIT".passed
And the account has the following terms:....................................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-22...................passed
And no CASH_ADVANCE_FEE is charged on 2021-04-22............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total account balance is CAD 1400.00...............................passed
And no MEMBERSHIP_FEE is posted on account..................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Accidental Exit: validate there is NO membership extension resulted due to IFRP waivers" time="17.686">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_FEE_CHG" = "9".passed
And the account waivers are:................................................passed
And the billing period ends.................................................passed
And a card purchase of CAD 394.00 is made on 2021-05-03.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-03...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-05-03.............passed
And the total account balance is CAD 600.00.................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 600.00.passed
And 6 transactions exist for "Sam" on 2021-05-15............................passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-20...................passed
And the billing period ends.................................................passed
When the account reaches the end of the day.................................passed
And today is 2021-06-02.....................................................passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-06-02 with code "ACCIDENTAL".passed
When the account reaches the end of the day.................................passed
And No MEMBERSHIP waiver for the Account started after 2021-06-03...........passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Validate ACCIDENTAL FRP and validate MEMBERSHIP extension resulted due to waivers" time="65.25">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-01 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 01 under current country.passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_FEE_CHG" = "9".passed
Given today is 2021-04-05...................................................passed
And a card purchase of CAD 801.00 is made on 2021-04-05.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-05...................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-04-05 for 12 months when total balance is CAD 1007.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-18...................passed
And no CASH_ADVANCE_FEE is charged on 2021-05-18............................passed
And the billing period ends.................................................passed
And a payment of CAD 300.00 is made on 2021-06-05, that is effective from 2021-06-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-07-05, that is effective from 2021-07-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-08-05, that is effective from 2021-08-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-09-05, that is effective from 2021-09-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-10-05, that is effective from 2021-10-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-11-05, that is effective from 2021-11-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-12-05, that is effective from 2021-12-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-01-05, that is effective from 2022-01-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-02-05, that is effective from 2022-02-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-03-05, that is effective from 2022-03-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-04-05, that is effective from 2022-04-05.passed
And today is 2022-04-15.....................................................passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2022-04-15 with code "ACCIDENTAL".passed
Then MEMBERSHIP waiver for the Account started on 2022-04-15 and ended on 2023-04-16 reason WAIVER_EXTENDED_POST_FINANCIAL_RELIEF_EXIT.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Validate allocations post financial relief plan exit" time="34.3">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 445.00 is made on 2021-04-03.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-03...................passed
And a CASH_ADVANCE_FEE fee of CAD 6.00 is charged on 2021-04-03.............passed
And a payment of CAD 50.00 is made on 2021-04-10............................passed
Then the total balance is CAD 601 and balance breakdown looks like the following:.passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And 8 transactions exist for "Sam" on 2021-05-15............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total balance is CAD 1200 and balance breakdown looks like the following:.passed
And a payment of CAD 100.00 is made on 2021-06-10...........................passed
Then the total balance is CAD 1100 and balance breakdown looks like the following:.passed
And a payment of CAD 100.00 is made on 2021-06-12...........................passed
Then the total balance is CAD 1000 and balance breakdown looks like the following:.passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-06-15 with code "ACCIDENTAL".passed
And the account has the following terms:....................................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the total balance is CAD 1000 and balance breakdown looks like the following:.passed
And a card purchase of CAD 100.00 is made on 2021-07-10.....................passed
And a cash withdrawal of CAD 100.00 is made on 2021-07-10...................passed
And a payment of CAD 400.00 is made on 2021-07-12...........................passed
Then the total balance is CAD 803 and balance breakdown looks like the following:.passed
And the billing period ends.................................................passed
Then the total balance is CAD 835.54 and balance breakdown looks like the following:.passed
And a payment of CAD 150.00 is made on 2021-08-12...........................passed
Then the total balance is CAD 685.54 and balance breakdown looks like the following:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Early Exit: validate Cash Advance Fee, NSF, and Interest extension resulted due to IFRP waivers" time="33.344">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-04-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_CSH_ADV_FEE1" = "9".passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_NSF_FEE_IND" = "9".passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "9".passed
And the account waivers are:................................................passed
And a card purchase of CAD 600.00 is made on 2021-04-03.....................passed
And the total account balance is CAD 600.00.................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-04-15 for 12 months when total balance is CAD 600.00.passed
And 2 transactions exist for "Sam" on 2021-04-15............................passed
And a cash withdrawal of CAD 200.00 is made on 2021-04-20...................passed
And the billing period ends.................................................passed
When the account reaches the end of the day.................................passed
And today is 2021-05-02.....................................................passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-05-02 with code "EARLY_EXIT".passed
When the account reaches the end of the day.................................passed
Then CASH_ADVANCE_FEE waiver for the Account started on 2021-06-02 and ended on 2021-07-02 reason WAIVER_EXTENDED_POST_FINANCIAL_RELIEF_EXIT.passed
Then NSF_FEE waiver for the Account started on 2021-06-02 and ended on 2021-07-02 reason WAIVER_EXTENDED_POST_FINANCIAL_RELIEF_EXIT.passed
Then INTEREST waiver for the Account started on 2021-06-02 and ended on 2021-07-02 reason WAIVER_EXTENDED_POST_FINANCIAL_RELIEF_EXIT.passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 is made on 2021-06-10...........................passed
And today is 2021-06-20.....................................................passed
And a cash withdrawal of CAD 300 is made on 2021-06-20......................passed
And no CASH_ADVANCE_FEE fee is charged on 2021-06-20........................passed
And a payment of CAD 500.00 effective on 2021-06-10 is reversed on 2021-06-20 with reason RETURNED_PAYMENT_NSF.passed
Then no DISHONOURED_PAYMENT_FEE is charged on 2021-06-20....................passed
And the billing period ends.................................................passed
And CAD 0 interest will be charged..........................................passed
And today is 2021-07-04.....................................................passed
And a cash withdrawal of CAD 300 is made on 2021-07-04......................passed
And a CASH_ADVANCE_FEE of CAD 9 is charged..................................passed
And the billing period ends.................................................passed
And a payment of CAD 500.00 is made on 2021-07-21...........................passed
And a payment of CAD 500.00 effective on 2021-07-21 is reversed on 2021-07-26 with reason RETURNED_PAYMENT_NSF.passed
Then a DISHONOURED_PAYMENT_FEE of CAD 25.00 is charged......................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan Early Exit" name="Accidental Exit: validate No Cash Advance Fee and NSF extension resulted due to IFRP waivers" time="21.431">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-03-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_CSH_ADV_FEE1" = "9".passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_NSF_FEE_IND" = "9".passed
And the account waivers are:................................................passed
And a cash withdrawal of CAD 300 is made on 2021-03-06......................passed
And no CASH_ADVANCE_FEE fee is charged on 2021-03-06........................passed
And a card purchase of CAD 600.00 is made on 2021-03-07.....................passed
And the total account balance is CAD 900.00.................................passed
And the billing period ends.................................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-04-15 for 12 months when total balance is CAD 1020.00.passed
And 6 transactions exist for "Sam" on 2021-04-15............................passed
And the billing period ends.................................................passed
When the account reaches the end of the day.................................passed
And today is 2021-05-02.....................................................passed
When globestar financial relief plan earlyexit reported event is received for "Sam" account on 2021-05-02 with code "ACCIDENTAL".passed
And the account waivers are:................................................passed
When the account reaches the end of the day.................................passed
And a payment of CAD 500.00 is made on 2021-05-10...........................passed
And today is 2021-05-20.....................................................passed
And a cash withdrawal of CAD 300 is made on 2021-05-20......................passed
And a CASH_ADVANCE_FEE of CAD 9 is charged..................................passed
And a payment of CAD 500.00 effective on 2021-05-10 is reversed on 2021-05-20 with reason RETURNED_PAYMENT_NSF.passed
Then a DISHONOURED_PAYMENT_FEE of CAD 25.00 is charged......................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="FRP Plan: Billing History fields in EoD file updating correctly" name="On subsequent payments, billing history is updated" time="108.764">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 1200 is made on 2021-06-03.......................passed
And a cash withdrawal of CAD 600 is made on 2021-06-03......................passed
And a CASH_ADVANCE_FEE of CAD 18.00 is charged..............................passed
When the billing period ends................................................passed
Then a CAD 120.00 membership fee is charged.................................passed
When the current business date for given country is 2021-07-02..............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-07-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-07-15 for 12 months when total balance is CAD 1938.passed
When the billing period ends................................................passed
And the current business date for given country is 2021-08-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-08-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-08-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2021-09-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-09-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-09-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2021-10-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-10-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-10-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2021-11-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-11-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-11-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2021-12-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-12-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-12-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2022-01-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2022-01-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2022-01-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2022-02-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2022-02-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="FRP Plan: Billing History fields in EoD file updating correctly" name="Over payment On subsequent payments, billing history is updated" time="30.308">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 1200 is made on 2021-06-03.......................passed
And a cash withdrawal of CAD 600 is made on 2021-06-03......................passed
And a CASH_ADVANCE_FEE of CAD 18.00 is charged..............................passed
When the billing period ends................................................passed
Then a CAD 120.00 membership fee is charged.................................passed
And account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-07-15 for 12 months when total balance is CAD 1938.passed
When the billing period ends................................................passed
And the current business date for given country is 2021-08-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-08-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 261.50 is made on 2021-08-15...........................passed
When the billing period ends................................................passed
And the current business date for given country is 2021-09-02...............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-09-01.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan enrollment EOD" name="Current Balance vs Beg Balance and Payment History fields" time="46.364">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 27 days of the country.passed
And a card purchase of CAD 1200.00 is made on 2021-06-02....................passed
And a cash withdrawal of CAD 600.00 is made on 2021-06-02...................passed
And a CASH_ADVANCE_ATM of 600.00 is recorded................................passed
And a CASH_ADVANCE_FEE of CAD 18.00 is charged..............................passed
When the billing period ends................................................passed
Then a CAD 120.00 membership fee is charged.................................passed
Then account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-07-15 for 12 months when total balance is CAD 1938.00.passed
When the current business date for given country is 2021-07-16..............passed
Then Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-07-15.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And a payment of CAD 161.50 is made on 2021-07-19...........................passed
When the current business date for given country is 2021-07-20..............passed
Then Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-07-19.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief Plan enrollment EOD" name="Current Balance vs Beg Balance for an Account enrolled in FRP" time="49.334">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 27 days of the country.passed
And a card purchase of CAD 1200.00 is made on 2021-06-02....................passed
And a cash withdrawal of CAD 600.00 is made on 2021-06-02...................passed
And a CASH_ADVANCE_ATM of 600.00 is recorded................................passed
And a CASH_ADVANCE_FEE of CAD 18.00 is charged..............................passed
When the billing period ends................................................passed
Then a CAD 120.00 membership fee is charged.................................passed
Then account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-07-15 for 12 months when total balance is CAD 1938.00.passed
When the billing period ends................................................passed
And a payment of CAD 161.50 is made on 2021-08-02...........................passed
When the current business date for given country is 2021-08-03..............passed
Then Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-08-02.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
When the billing period ends................................................passed
When the current business date for given country is 2021-09-03..............passed
Then Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-09-02.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Validate non payment credits attributes in SBAL File fields with FRP enrollment" name="Scenario: Validate SBAL File fields for FRP enrollment accounts with non payment credits" time="42.797">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-06-16 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 880.50 is made on 2021-06-17.....................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total account balance is CAD 1000.50................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-07-20 for 12 months when total balance is CAD 1000.50.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
Then the minimum payment obligation is CAD 83.37............................passed
And a payment of CAD 83.37 is made on 2021-09-07............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And a payment of CAD 83.37 is made on 2021-09-22............................passed
When the current business date for given country is 2021-09-23..............passed
And a transaction with code "0006" and Plan Type "R" is received from Globestar for CAD 300.00 with the current business date.passed
And a MERCHANT_RETURN of CAD 300 is recorded................................passed
Then the credit allocation for CAD 300 credit posted on 2021-09-23 looks as follows on 2021-09-23:.passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-10-14.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial relief plan enrollment with Transaction file." name="Validating transaction EOD file generates correct values for an account enrolled in FRP." time="55.691">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-09-02 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a "PURCHASE" transaction is received from globestar for CAD 1200.00 with current business date in 0 days.passed
And a transaction with code "0007" and Plan Type "C" is received from Globestar for CAD 500.00 with the current business in 4 days.passed
And a CASH_ADVANCE_FEE of CAD 15.00 is charged..............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And a MEMBERSHIP_FEE of CAD 120.00 is charged...............................passed
And the total account balance is CAD 1835...................................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And the total interest charged for the billing period will be CAD 87.43 on 2021-11-01.passed
And a transaction with code "0020" and Plan Type "R" is received from Globestar for CAD 100.00 with the current business date.passed
And a REGULAR_PAYMENT of 100.00 is recorded.................................passed
And a transaction with code "0011" and Plan Type "C" is received from Globestar for CAD 100.00 with the current business date.passed
And a RETURNED_PAYMENT_NSF of 100.00 is recorded............................passed
Then the total customer balance on 2021-11-15 is CAD 1947.43................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-11-15 for 12 months when total balance is CAD 1947.43.passed
When the current business date is 2021-11-16................................passed
And Generate "TRANSACTION" End Of Day Files for current country code on date 2021-11-15.passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
And Transaction file contains referenceNumber and cardNumber for "Sam"......passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
And Transaction file contains referenceNumber and cardNumber for "Sam"......passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
When the current business date is 2021-11-17................................passed
When a file: Payment_VariableAmount that has a CAD 162.29 transaction for "Sam" is submitted from FINCAP on 2021-11-17.passed
And a REGULAR_PAYMENT of 162.29 is recorded for "Sam".......................passed
And the total account balance on 2021-11-17 is CAD 1785.14 and contains:....passed
When the current business date is 2021-11-18................................passed
And Generate "TRANSACTION" End Of Day Files for current country code on date 2021-11-17.passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
And "TRANSACTION" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial relief plan Graduation" name="Validate Graduation process from IFRP and validate Cash Advance Fee, Interest, and NSF extension resulted due to waivers" time="120.105">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-05-03 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted with cycle day 01 under current country.passed
And a AIR_CANADA_PREMIUM user is added to the account.......................passed
When the account reaches the end of the day.................................passed
Then a SUPPLEMENTARY_MEMBERSHIP_FEE fee of CAD 199.00 is charged on 2021-05-03.passed
Given today is 2021-05-04...................................................passed
And the total account balance is CAD 199.00.................................passed
When a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_CSH_ADV_FEE1" = "9".passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_NSF_FEE_IND" = "9".passed
And a fee and interest waiver event is received with the following value: "WAIVE_FEE_AMBS_WAV_INTR_CHG" = "9".passed
And the account waivers are:................................................passed
And a card purchase of CAD 801.00 is made on 2021-05-05.....................passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-05...................passed
And no CASH_ADVANCE_FEE is charged on 2021-05-05............................passed
And the total account balance is CAD 1200.00................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-05-15 for 12 months when total balance is CAD 1200.00.passed
Then the account has a "Fixed Payment" plan.................................passed
And the account has an "Aeroplanù* Reserve Card" plan.......................passed
When the current business date for given country is 2021-05-16..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2021-05-15.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And a cash withdrawal of CAD 200.00 is made on 2021-05-18...................passed
And no CASH_ADVANCE_FEE is charged on 2021-05-18............................passed
And the total account balance is CAD 1400.00................................passed
And the billing period ends.................................................passed
And a payment of CAD 300.00 is made on 2021-06-05, that is effective from 2021-06-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-07-05, that is effective from 2021-07-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-08-05, that is effective from 2021-08-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-09-05, that is effective from 2021-09-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-10-05, that is effective from 2021-10-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-11-05, that is effective from 2021-11-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2021-12-05, that is effective from 2021-12-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-01-05, that is effective from 2022-01-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-02-05, that is effective from 2022-02-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-03-05, that is effective from 2022-03-05.passed
And the billing period ends.................................................passed
And a payment of CAD 100.00 is made on 2022-04-05, that is effective from 2022-04-05.passed
And the billing period ends.................................................passed
And the account reaches the end of the day..................................passed
And the accounts calendar current business date is 2022-05-02...............passed
And the account reaches the end of the day..................................passed
And the accounts calendar current business date is 2022-05-03...............passed
When the current business date for given country is 2022-05-03..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-05-02.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
Then no supplementary membership fee is charged on 2022-05-03...............passed
And a payment of CAD 100.00 is made on 2022-05-05, that is effective from 2022-05-05.passed
And a card purchase of CAD 200.00 is made on 2022-05-16.....................passed
And a cash withdrawal of CAD 100.00 is made on 2022-05-17...................passed
And no CASH_ADVANCE_FEE is charged on 2022-05-17............................passed
And the account has the following terms:....................................passed
When the billing period ends................................................passed
Then a MEMBERSHIP_FEE fee of CAD 599.00 is charged on 2022-06-01............passed
When the current business date for given country is 2022-06-03..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-06-02.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
Then the total account balance is CAD 899.00................................passed
And CAD 0 interest will be deferred.........................................passed
And CAD 0 interest will be charged..........................................passed
And CAD 4.59 interest will be waived........................................passed
And a card purchase of CAD 300.00 is made on 2022-06-16.....................passed
And a cash withdrawal of CAD 200.00 is made on 2022-06-17...................passed
And a payment of CAD 100.00 effective on 2022-05-05 is reversed on 2022-06-20 with reason RETURNED_PAYMENT_NSF.passed
Then no DISHONOURED_PAYMENT_FEE is charged on 2021-06-20....................passed
And no CASH_ADVANCE_FEE is charged on 2022-06-17............................passed
When the current business date for given country is 2022-06-18..............passed
Then Generate "ACCOUNT_BALANCE" End Of Day Files for current country code on date 2022-06-17.passed
And "ACCOUNT_BALANCE" file contains records for "Sam" with the following records:.passed
And CAD 0 interest will be charged..........................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief plan with backdated payment reversal" name="Backdated payment reversal is received for an account enrolled in financial relief plan" time="24.837">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-09-02 with end of day time at 00:00.passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 1200.00 is made on 2021-09-02....................passed
And a cash withdrawal of CAD 500.00 is made on 2021-09-06...................passed
And a CASH_ADVANCE_FEE fee of CAD 15.00 is charged on 2021-09-06............passed
And the billing period ends.................................................passed
And the total account balance is CAD 2314.00................................passed
And the billing period ends.................................................passed
And the total account balance is CAD 2414.03................................passed
When account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2021-11-02 for 12 months when total balance is CAD 2414.03.passed
Then the account has a "Fixed Payment" plan.................................passed
Then the total interest balance breakdown is CAD 2414.03 and breakdown looks like the following:.passed
When a backdated payment of CAD 1000 is posted on 2021-11-04 with effective date 2021-10-25.passed
And PURCHASE INTEREST_CREDIT_FOR_BACKDATINGs, totalling CAD 6.47, will be posted on 2021-11-04 and effective on 2021-11-01.passed
And CASH INTEREST_CREDIT_FOR_BACKDATINGs, totalling CAD 0.10, will be posted on 2021-11-04 and effective on 2021-11-01.passed
Then the total interest balance breakdown is CAD 1407.46 and breakdown looks like the following:.passed
When a payment of CAD 1000 effective on 2021-10-25 is reversed on 2021-11-04 with reason RETURNED_PAYMENT_MISPOSTED.passed
And the billing period ends.................................................passed
Then the total interest balance breakdown is CAD 2414.03 and breakdown looks like the following:.passed
And the minimum payment obligation is CAD 201.17 with period demands of:....passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief plan with backdated payment reversal" name="Backdated payment reversal of payment effective before hardship, reversed while in hardship," time="64.617">
        <system-out>
            <![CDATA[Given today is 2022-09-02...................................................passed
And a new AIR_CANADA_CORE credit application is submitted with cycle day 1..passed
And a card purchase of CAD 1200.00 is made on 2022-09-02....................passed
And a cash withdrawal of CAD 500.00 is made on 2022-09-06...................passed
And a CASH_ADVANCE_FEE of CAD 15.00 is charged..............................passed
And the billing period ends.................................................passed
And a CAD 120.00 membership fee is charged..................................passed
And CAD 29.68 PURCHASE interest will be DEFERRED............................passed
And CAD 11.00 CASH interest will be DEFERRED................................passed
And the period demands are:.................................................passed
And a payment of CAD 1835.00 is made on 2022-10-02..........................passed
And the total balance for interest view on 2022-10-02 is CAD 0.00 and payment allocation looks like the following:.passed
And the period demands are:.................................................passed
And a card purchase of CAD 1200.00 is made on 2022-10-02....................passed
And the total account balance is CAD 1200.00................................passed
And account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2022-10-05 for 12 months when total balance is CAD 1200.passed
And the account has a "Fixed Payment" plan..................................passed
And a journal entry of CAD 1200.00 with type INTERNAL_PRINCIPAL and reason HARDSHIP_ENROLLMENT_CREDIT is posted on 2022-10-05, effective 2022-10-05.passed
And a journal entry of CAD 1200.00 with type INTERNAL_PRINCIPAL and reason HARDSHIP_ENROLLMENT_DEBIT is posted on 2022-10-05, effective 2022-10-05.passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the total balance on 2022-11-09 is CAD 1200.00 and balance breakdown looks like the following:.passed
When a payment of CAD 1835.00 effective on 2022-10-02 is reversed on 2022-11-10 with reason RETURNED_PAYMENT_MISPOSTED.passed
Then the period demands are:................................................passed
And the account age is 30 days..............................................passed
And the age breakdown is....................................................passed
And the total balance on 2022-11-10 is CAD 3035.00 and balance breakdown looks like the following:.passed
And a payment of CAD 1800.00 is made on 2022-11-18..........................passed
And the period demands are:.................................................passed
And a payment of CAD 100.00 is made on 2022-11-20...........................passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the account age is current..............................................passed
And the period demands are:.................................................passed
And a payment of CAD 100.00 is made on 2022-12-20...........................passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the account age is 30 days..............................................passed
And the age breakdown is....................................................passed
And the total balance on 2023-01-18 is CAD 1035.00 and balance breakdown looks like the following:.passed
When a payment of CAD 100.00 effective on 2022-12-20 is reversed on 2023-01-19 with reason RETURNED_PAYMENT_NSF.passed
Then the total balance on 2023-01-19 is CAD 1135.00 and balance breakdown looks like the following:.passed
And the period demands are:.................................................passed
And a payment of CAD 100.00 is made on 2023-01-20...........................passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the account age is 60 days..............................................passed
And the age breakdown is....................................................passed
And a payment of CAD 250.00 is made on 2023-02-20...........................passed
And the total balance on 2023-02-20 is CAD 785.00 and balance breakdown looks like the following:.passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And CAD 0 PURCHASE interest will be CHARGED.................................passed
And CAD 0 CASH interest will be CHARGED.....................................passed
And the period demands are:.................................................passed
And the account age is 0 days...............................................passed
When a payment of CAD 250.00 effective on 2023-02-20 is reversed on 2023-03-03 with reason RETURNED_PAYMENT_NSF.passed
Then the period demands are:................................................passed
And a payment of CAD 100.00 is made on 2023-03-20...........................passed
And the total balance on 2023-03-20 is CAD 935.00 and balance breakdown looks like the following:.passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the account age is 90 days..............................................passed
And the age breakdown is....................................................passed
And a payment of CAD 100.00 is made on 2023-04-20...........................passed
And the period demands are:.................................................passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And globestar financial relief plan earlyexit reported event is received for "Sam" account on 2023-05-02 with code "EARLY_EXIT".passed
And the account age is 90 days..............................................passed
And the age breakdown is....................................................passed
When a payment of CAD 100.00 effective on 2023-04-20 is reversed on 2023-05-03 with reason RETURNED_PAYMENT_MISPOSTED.passed
Then the period demands are:................................................passed
And the billing period ends.................................................passed
And the period demands are:.................................................passed
And the account age is 150 days.............................................passed
And the age breakdown is....................................................passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Financial Relief plan with backdated payment reversal" name="Backdated payment reversal of payment effective while in hardship, reversal posted after ACCIDENTAL EXIT from hardship- should sweep the reversal amount to relief residual" time="14.263">
        <system-out>
            <![CDATA[Given today is 2022-09-02...................................................passed
And a new AIR_CANADA_PREMIUM credit application is submitted for "Sam" with end of cycle in 28 days of the country.passed
And a card purchase of CAD 1000.00 is made on 2022-09-02....................passed
And a cash withdrawal of CAD 500.00 is made on 2022-09-03...................passed
And a CASH_ADVANCE_FEE of CAD 15.00 is charged..............................passed
And the total account balance is CAD 1515.00................................passed
And account is successfully enrolled in "INTERNATIONAL_FINANCIAL_RELIEF_CHARGE" financial relief plan assistance on 2022-09-15 for 12 months when total balance is CAD 1515.passed
And the account has a "Fixed Payment" plan..................................passed
And a payment of CAD 315.00 is made on 2022-09-16...........................passed
And the billing period ends.................................................passed
Then the total balance on 2022-10-01 is CAD 1200.00 and balance breakdown looks like the following:.passed
And globestar financial relief plan earlyexit reported event is received for "Sam" account on 2022-10-03 with code "ACCIDENTAL".passed
Then the total balance on 2022-10-04 is CAD 1200.00 and balance breakdown looks like the following:.passed
And a payment of CAD 315.00 effective on 2022-09-16 is reversed on 2022-10-20 with reason RETURNED_PAYMENT_MISPOSTED.passed
Then the total balance on 2022-10-21 is CAD 1515.00 and balance breakdown looks like the following:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="Make sure Beg balance and current balance are correct after one regular payment" name="Current Balance vs Beg Balance" time="18.212">
        <system-out>
            <![CDATA[Given Country calendar is set up for random country on day 2021-01-01 with end of day time at 00:00.passed
And a new AIR_CANADA_CORE credit application is submitted for "Sam" with end of cycle in 27 days of the country.passed
And a card purchase of CAD 1200.00 is made on 2021-01-01....................passed
And a cash withdrawal of CAD 600.00 is made on 2021-01-01...................passed
And a CASH_ADVANCE_FEE of CAD 18.00 is charged..............................passed
And the billing period ends.................................................passed
And roll the account business date of "Sam" to end of cycle date............passed
And a payment of CAD 618.00 is made on 2021-01-29...........................passed
When the current business date for given country is 2021-01-30..............passed
Then Generate "SUB_BALANCE" End Of Day Files for current country code on date 2021-01-29.passed
And "SUB_BALANCE" file contains records for "Sam" with the following records:.passed
]]>
        </system-out>
    </testcase>
    <testcase classname="ForeignTransaction" name="Validate that when a foreign transaction is made via gateway it is journaled successfully" time="306.758">
        <failure message="Condition with alias '[2024-06-17T23:35:39.856054] Assert ForeignTransactionJournalEntry for account fb48f0d2-7a03-42eb-a0d4-22ba33486d51 exists' didn't complete within 5 minutes because assertion condition defined as a lambda expression in com.aexp.mars.regression.helper.PollingHelper that uses java.util.concurrent.atomic.AtomicReference, java.util.concurrent.atomic.AtomicReferencejava.util.concurrent.Callable, java.util.concurrent.Callablejava.util.function.BiConsumer &#10;The following assertion failed:&#10;1) [Assert ForeignTransactionJournalEntry for account fb48f0d2-7a03-42eb-a0d4-22ba33486d51 exists] &#10;Expecting value to be true but was false&#10;at JournalAsserter.lambda$assertForeignTransactionJournalEntryExists$4(JournalAsserter.java:96)&#10;." type="org.awaitility.core.ConditionTimeoutException">
            <![CDATA[Given Country calendar is set up for random country on day 2023-01-01 with end of day time at 00:00.passed
And a new SIMPLY_CASH credit application is submitted for "Bob" with end of cycle set to current business day of the country.passed
Then the currently open billing period for "Bob" ends on the current business day of country.passed
When a SINGLE_PURCHASE_EOD transaction is received from GCNS with the current business date 0 days ago with the following records:.passed
Then a foreign PURCHASE MERCHANT_CHARGE of USD 6.00 amounting to CAD 4.00 is posted on 2023-01-01 and effective on 2023-01-01.failed
When the current business date for given country is 2023-01-02..............skipped
And Generate "TRANSACTION" End Of Day Files for current country code on date 2023-01-01.skipped
And "TRANSACTION" file contains records for "Bob" with the following records:.skipped
And the billing period ends.................................................skipped
And the previous billing period is assessed.................................skipped

StackTrace:
org.awaitility.core.ConditionTimeoutException: Condition with alias '[2024-06-17T23:35:39.856054] Assert ForeignTransactionJournalEntry for account fb48f0d2-7a03-42eb-a0d4-22ba33486d51 exists' didn't complete within 5 minutes because assertion condition defined as a lambda expression in com.aexp.mars.regression.helper.PollingHelper that uses java.util.concurrent.atomic.AtomicReference, java.util.concurrent.atomic.AtomicReferencejava.util.concurrent.Callable, java.util.concurrent.Callablejava.util.function.BiConsumer 
The following assertion failed:
1) [Assert ForeignTransactionJournalEntry for account fb48f0d2-7a03-42eb-a0d4-22ba33486d51 exists] 
Expecting value to be true but was false
at JournalAsserter.lambda$assertForeignTransactionJournalEntryExists$4(JournalAsserter.java:96)
.
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:165)
	at org.awaitility.core.AssertionCondition.await(AssertionCondition.java:119)
	at org.awaitility.core.AssertionCondition.await(AssertionCondition.java:31)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.untilAsserted(ConditionFactory.java:679)
	at com.aexp.mars.regression.helper.PollingHelper.waitForAllAssertedRoot(PollingHelper.java:194)
	at com.aexp.mars.regression.helper.PollingHelper.waitForAllAsserted(PollingHelper.java:153)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertForeignTransactionJournalEntryExists(JournalAsserter.java:76)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyForeignTransactionRecorded(JournalSteps.java:119)
	at ✽.a foreign PURCHASE MERCHANT_CHARGE of USD 6.00 amounting to CAD 4.00 is posted on 2023-01-01 and effective on 2023-01-01(classpath:features/simply_cash/ForeignTransaction.feature:20)
Caused by: org.assertj.core.api.SoftAssertionError: 
The following assertion failed:
1) [Assert ForeignTransactionJournalEntry for account fb48f0d2-7a03-42eb-a0d4-22ba33486d51 exists] 
Expecting value to be true but was false
at JournalAsserter.lambda$assertForeignTransactionJournalEntryExists$4(JournalAsserter.java:96)

	at org.assertj.core.error.AssertionErrorCreator.multipleSoftAssertionsError(AssertionErrorCreator.java:100)
	at org.assertj.core.api.AbstractSoftAssertions.assertAll(AbstractSoftAssertions.java:37)
	at org.assertj.core.api.AbstractSoftAssertions.assertAll(AbstractSoftAssertions.java:42)
	at com.aexp.mars.regression.helper.PollingHelper.lambda$waitForAllAssertedRoot$2(PollingHelper.java:199)
	at org.awaitility.core.AssertionCondition.lambda$new$0(AssertionCondition.java:53)
	at org.awaitility.core.ConditionAwaiter$ConditionPoller.call(ConditionAwaiter.java:222)
	at org.awaitility.core.ConditionAwaiter$ConditionPoller.call(ConditionAwaiter.java:209)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.awaitility.core.SameThreadExecutorService.execute(SameThreadExecutorService.java:79)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)
	at org.awaitility.core.ConditionAwaiter.await(ConditionAwaiter.java:99)
	at org.awaitility.core.AssertionCondition.await(AssertionCondition.java:119)
	at org.awaitility.core.AssertionCondition.await(AssertionCondition.java:31)
	at org.awaitility.core.ConditionFactory.until(ConditionFactory.java:895)
	at org.awaitility.core.ConditionFactory.untilAsserted(ConditionFactory.java:679)
	at com.aexp.mars.regression.helper.PollingHelper.waitForAllAssertedRoot(PollingHelper.java:194)
	at com.aexp.mars.regression.helper.PollingHelper.waitForAllAsserted(PollingHelper.java:153)
	at com.aexp.mars.regression.test.assertion.JournalAsserter.assertForeignTransactionJournalEntryExists(JournalAsserter.java:76)
	at com.aexp.mars.bdd.steps.JournalSteps.verifyForeignTransactionRecorded(JournalSteps.java:119)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at io.cucumber.java.Invoker.doInvoke(Invoker.java:66)
	at io.cucumber.java.Invoker.invoke(Invoker.java:24)
	at io.cucumber.java.AbstractGlueDefinition.invokeMethod(AbstractGlueDefinition.java:47)
	at io.cucumber.java.JavaStepDefinition.execute(JavaStepDefinition.java:29)
	at io.cucumber.core.runner.CoreStepDefinition.execute(CoreStepDefinition.java:66)
	at io.cucumber.core.runner.PickleStepDefinitionMatch.runStep(PickleStepDefinitionMatch.java:63)
	at io.cucumber.core.runner.ExecutionMode$1.execute(ExecutionMode.java:10)
	at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:92)
	at io.cucumber.core.runner.TestStep.run(TestStep.java:64)
	at io.cucumber.core.runner.PickleStepTestStep.run(PickleStepTestStep.java:51)
	at io.cucumber.core.runner.TestCase.run(TestCase.java:104)
	at io.cucumber.core.runner.Runner.runPickle(Runner.java:73)
	at io.cucumber.testng.TestNGCucumberRunner.lambda$runScenario$0(TestNGCucumberRunner.java:117)
	at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:117)
	at io.cucumber.testng.TestNGCucumberRunner.runScenario(TestNGCucumberRunner.java:114)
	at io.cucumber.testng.AbstractTestNGCucumberTests.runScenario(AbstractTestNGCucumberTests.java:31)
	at jdk.internal.reflect.GeneratedMethodAccessor942.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:598)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
	at org.testng.internal.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:77)
	at org.testng.internal.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:15)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
]]>
        </failure>
    </testcase>
</testsuite>
